
> ssb-validate@3.0.7 test /home/chrx/dev/ssb-validate
> set -e; for t in test/*.js; do node $t; done

TAP version 13
# simple
{ validated: 10,
  queued: 0,
  queue: 
   [ { previous: null,
       sequence: 1,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080000,
       hash: 'sha256',
       content: [Object],
       signature: 'KmjPhbpYmLraZPtBMHZ3XA+iS6f510FaPfGm1EB4SPEA8PIAwGayFdnHkMR8Y0hpxCFI8mz1hOoQTWaagoWMAA==.sig.ed25519' },
     { previous: '%jIiVOF5631YGiIiK/uB43IZn7d9ZSv+e0ppFqh2QBBc=.sha256',
       sequence: 2,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080001,
       hash: 'sha256',
       content: [Object],
       signature: 'MQuGDPe9oCWzQUU7CQ9JlSJCp0WptWq+WFsD9htLjTRz6UfjDbBekOsSi5PwLg9zNrVXCPQ+zTBCeT0aAxqoAQ==.sig.ed25519' },
     { previous: '%cYRhj6c78apgj2EIRUcAvz+lepErcPCsrhLo2CXvNuw=.sha256',
       sequence: 3,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080002,
       hash: 'sha256',
       content: [Object],
       signature: 'm5uMVoMesJH2+pSFhhfD1u9W0ZJ0Tzed9HAPHhLUOYDTbB43797eoU7DE/wcfbX3suXodzWiebUhBnF9qoAkBA==.sig.ed25519' },
     { previous: '%FgftYqwIuAcro/e4PN+s64xLBDokMOPS8euUjcoEsaE=.sha256',
       sequence: 4,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080003,
       hash: 'sha256',
       content: [Object],
       signature: 'S12Ej3J24eM27TEXuykNX3mvDNhM3Tu3g/+JakkmeQ9O0MTyk+ynbHM/U7JyqletIcgrSPIL/EdIHXvCIhtWCQ==.sig.ed25519' },
     { previous: '%NNRVSU+x97QUVuX2e878nTPdPdXD4TXW1QeJzH1vhYg=.sha256',
       sequence: 5,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080004,
       hash: 'sha256',
       content: [Object],
       signature: 'mjdjjliWXa6Wb8WkFuwXATeEVwnGvc4icId5s9LcH86AAaoHIW9JPXo0r/qedhdjBl1DrzGHp54EyUYgfmFeBg==.sig.ed25519' },
     { previous: '%ZuwXk31XSez4JaJIju/hJlCNJaKz/ZuFSpj7g8DJXfI=.sha256',
       sequence: 6,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080005,
       hash: 'sha256',
       content: [Object],
       signature: 'qd5Q+bSjvbBqjyQrIbxoTwQ8TKMRSPCotOF73dTKw1E7LPQ32aWic3tLRUS7uazHK8ovOo+Ar9alVq9isF5+Dw==.sig.ed25519' },
     { previous: '%VS1eNDbPG9j+f7zl3Flgyp/X9FvPm1wnLffeSlnZsSw=.sha256',
       sequence: 7,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080006,
       hash: 'sha256',
       content: [Object],
       signature: 'pwfgeNncbXWlKOCs28jCMfz+66NkrvcG29tYcYhjQ8q+zaUDk19iuTfQJkXdWDFlhZTvgR2Gtzh+0CNcouwEAQ==.sig.ed25519' },
     { previous: '%0J0eJK0j78akyvZoQiawSTkSWBUiGv1H7FpC/YFNNU8=.sha256',
       sequence: 8,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080007,
       hash: 'sha256',
       content: [Object],
       signature: 'mwAUjScd3xphF8r8oFgi/gRSFRDvKBFzNeYg+4Qxbk5XFVi78IXPtXrYSIib5gO2BskFK7PgxmEOBSSGmNsXAA==.sig.ed25519' },
     { previous: '%XG/SgmRHCo9FpIqxAa4gEjLdPKejQItDRnAsmGqfWpk=.sha256',
       sequence: 9,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080008,
       hash: 'sha256',
       content: [Object],
       signature: 'EGgl5fyVc2T6XIrqB7sdeM5+XxP9RkEtyBuJA53q5WssCnkFHw756Z49mBp2SUHB1nMOsZhBRcSdanXoZH3iDA==.sig.ed25519' },
     { previous: '%Aez/9fUOHgC9u2zNhFai7FR+LJ+TiviT3zDIO8hdSOU=.sha256',
       sequence: 10,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080009,
       hash: 'sha256',
       content: [Object],
       signature: 'XoFnMvap94PSkzuhQbLtZcNOCGBWNvKss9qjf4oh489t1iAyjEXXo4dGMeoId8RXyf2MFZCNjtUTE76noslvBg==.sig.ed25519' } ],
  feeds: 
   { '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519': 
      { id: '%TZx6lr7gDvQbiwaY9m1EHs7vX4ykcVZXAY6P5H4nU9M=.sha256',
        sequence: 10,
        timestamp: 1491898080009,
        queue: [] } },
  error: null,
  waiting: [] }
# rerun
ok 1 should be equal
ok 2 should be equal
ok 3 should be equal
ok 4 should be equal
ok 5 should be equal
ok 6 should be equal
ok 7 should be equal
ok 8 should be equal
ok 9 should be equal
ok 10 should be equal
# invalid - fork
{ previous: '%Aez/9fUOHgC9u2zNhFai7FR+LJ+TiviT3zDIO8hdSOU=.sha256',
  sequence: 11,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080010,
  hash: 'sha256',
  content: { type: 'invalid' },
  signature: 'UyHS+DiMYu1u1sB0aahw7qde46uC17AmLTjarHYSUtbV7PcLBFEKA6IYFBIN5XgwXosENLzKxVd9ir31cx9mDw==.sig.ed25519' }
{ Error: invalid message: expected different previous message, on feed:@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519
    at fatalError (/home/chrx/dev/ssb-validate/index.js:76:13)
    at Object.exports.checkInvalidCheap (/home/chrx/dev/ssb-validate/index.js:110:14)
    at Object.exports.checkInvalid (/home/chrx/dev/ssb-validate/index.js:125:21)
    at Object.exports.append (/home/chrx/dev/ssb-validate/index.js:171:21)
    at Test.<anonymous> (/home/chrx/dev/ssb-validate/test/error.js:68:17)
    at Test.bound [as _cb] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:77:32)
    at Test.run (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:96:10)
    at Test.bound [as run] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:77:32)
    at Immediate.next [as _onImmediate] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/results.js:71:15)
    at runCallback (timers.js:763:18) fatal: true }
ok 11 should be equal
# timestamp - rewind gives warning
Error: invalid message: expected sequence NaN but got:11in state:{"validated":10,"queued":0,"queue":[{"previous":null,"sequence":1,"author":"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519","timestamp":1491898080000,"hash":"sha256","content":{"type":"test","i":0},"signature":"KmjPhbpYmLraZPtBMHZ3XA+iS6f510FaPfGm1EB4SPEA8PIAwGayFdnHkMR8Y0hpxCFI8mz1hOoQTWaagoWMAA==.sig.ed25519"},{"previous":"%jIiVOF5631YGiIiK/uB43IZn7d9ZSv+e0ppFqh2QBBc=.sha256","sequence":2,"author":"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519","timestamp":1491898080001,"hash":"sha256","content":{"type":"test","i":1},"signature":"MQuGDPe9oCWzQUU7CQ9JlSJCp0WptWq+WFsD9htLjTRz6UfjDbBekOsSi5PwLg9zNrVXCPQ+zTBCeT0aAxqoAQ==.sig.ed25519"},{"previous":"%cYRhj6c78apgj2EIRUcAvz+lepErcPCsrhLo2CXvNuw=.sha256","sequence":3,"author":"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519","timestamp":1491898080002,"hash":"sha256","content":{"type":"test","i":2},"signature":"m5uMVoMesJH2+pSFhhfD1u9W0ZJ0Tzed9HAPHhLUOYDTbB43797eoU7DE/wcfbX3suXodzWiebUhBnF9qoAkBA==.sig.ed25519"},{"previous":"%FgftYqwIuAcro/e4PN+s64xLBDokMOPS8euUjcoEsaE=.sha256","sequence":4,"author":"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519","timestamp":1491898080003,"hash":"sha256","content":{"type":"test","i":3},"signature":"S12Ej3J24eM27TEXuykNX3mvDNhM3Tu3g/+JakkmeQ9O0MTyk+ynbHM/U7JyqletIcgrSPIL/EdIHXvCIhtWCQ==.sig.ed25519"},{"previous":"%NNRVSU+x97QUVuX2e878nTPdPdXD4TXW1QeJzH1vhYg=.sha256","sequence":5,"author":"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519","timestamp":1491898080004,"hash":"sha256","content":{"type":"test","i":4},"signature":"mjdjjliWXa6Wb8WkFuwXATeEVwnGvc4icId5s9LcH86AAaoHIW9JPXo0r/qedhdjBl1DrzGHp54EyUYgfmFeBg==.sig.ed25519"},{"previous":"%ZuwXk31XSez4JaJIju/hJlCNJaKz/ZuFSpj7g8DJXfI=.sha256","sequence":6,"author":"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519","timestamp":1491898080005,"hash":"sha256","content":{"type":"test","i":5},"signature":"qd5Q+bSjvbBqjyQrIbxoTwQ8TKMRSPCotOF73dTKw1E7LPQ32aWic3tLRUS7uazHK8ovOo+Ar9alVq9isF5+Dw==.sig.ed25519"},{"previous":"%VS1eNDbPG9j+f7zl3Flgyp/X9FvPm1wnLffeSlnZsSw=.sha256","sequence":7,"author":"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519","timestamp":1491898080006,"hash":"sha256","content":{"type":"test","i":6},"signature":"pwfgeNncbXWlKOCs28jCMfz+66NkrvcG29tYcYhjQ8q+zaUDk19iuTfQJkXdWDFlhZTvgR2Gtzh+0CNcouwEAQ==.sig.ed25519"},{"previous":"%0J0eJK0j78akyvZoQiawSTkSWBUiGv1H7FpC/YFNNU8=.sha256","sequence":8,"author":"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519","timestamp":1491898080007,"hash":"sha256","content":{"type":"test","i":7},"signature":"mwAUjScd3xphF8r8oFgi/gRSFRDvKBFzNeYg+4Qxbk5XFVi78IXPtXrYSIib5gO2BskFK7PgxmEOBSSGmNsXAA==.sig.ed25519"},{"previous":"%XG/SgmRHCo9FpIqxAa4gEjLdPKejQItDRnAsmGqfWpk=.sha256","sequence":9,"author":"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519","timestamp":1491898080008,"hash":"sha256","content":{"type":"test","i":8},"signature":"EGgl5fyVc2T6XIrqB7sdeM5+XxP9RkEtyBuJA53q5WssCnkFHw756Z49mBp2SUHB1nMOsZhBRcSdanXoZH3iDA==.sig.ed25519"},{"previous":"%Aez/9fUOHgC9u2zNhFai7FR+LJ+TiviT3zDIO8hdSOU=.sha256","sequence":10,"author":"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519","timestamp":1491898080009,"hash":"sha256","content":{"type":"test","i":9},"signature":"XoFnMvap94PSkzuhQbLtZcNOCGBWNvKss9qjf4oh489t1iAyjEXXo4dGMeoId8RXyf2MFZCNjtUTE76noslvBg==.sig.ed25519"}],"feeds":{"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519":{"id":"%TZx6lr7gDvQbiwaY9m1EHs7vX4ykcVZXAY6P5H4nU9M=.sha256","sequence":10,"timestamp":1491898080009,"queue":[]}},"error":null,"waiting":[]}, on feed:@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519
    at nonFatalError (/home/chrx/dev/ssb-validate/index.js:88:10)
    at Object.exports.checkInvalidCheap (/home/chrx/dev/ssb-validate/index.js:101:14)
    at Object.exports.checkInvalid (/home/chrx/dev/ssb-validate/index.js:125:21)
    at Test.<anonymous> (/home/chrx/dev/ssb-validate/test/error.js:87:17)
    at Test.bound [as _cb] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:77:32)
    at Test.run (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:96:10)
    at Test.bound [as run] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:77:32)
    at Immediate.next [as _onImmediate] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/results.js:71:15)
    at runCallback (timers.js:763:18)
    at tryOnImmediate (timers.js:734:5)
not ok 12 should be equal
  ---
    operator: equal
    expected: true
    actual:   undefined
    at: Test.<anonymous> (/home/chrx/dev/ssb-validate/test/error.js:89:7)
    stack: |-
      Error: should be equal
          at Test.assert [as _assert] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:225:54)
          at Test.bound [as _assert] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:77:32)
          at Test.equal.Test.equals.Test.isEqual.Test.is.Test.strictEqual.Test.strictEquals (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:388:10)
          at Test.bound [as equal] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:77:32)
          at Test.<anonymous> (/home/chrx/dev/ssb-validate/test/error.js:89:7)
          at Test.bound [as _cb] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:77:32)
          at Test.run (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:96:10)
          at Test.bound [as run] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:77:32)
          at Immediate.next [as _onImmediate] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/results.js:71:15)
          at runCallback (timers.js:763:18)
  ...
# timestamp - rewind append ok
{ previous: '%TZx6lr7gDvQbiwaY9m1EHs7vX4ykcVZXAY6P5H4nU9M=.sha256',
  sequence: 11,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080008,
  hash: 'sha256',
  content: { type: 'invalid' },
  signature: 'oG/nBygoAskGvUDxf5/LUuhiv7LDQErlvUejuWGpZSOK/h6f2cPbct/mmidrdTe5vepO8Wy24iXP/BAMWC14Dw==.sig.ed25519' } { previous: '%Aez/9fUOHgC9u2zNhFai7FR+LJ+TiviT3zDIO8hdSOU=.sha256',
  sequence: 10,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080009,
  hash: 'sha256',
  content: { type: 'test', i: 9 },
  signature: 'XoFnMvap94PSkzuhQbLtZcNOCGBWNvKss9qjf4oh489t1iAyjEXXo4dGMeoId8RXyf2MFZCNjtUTE76noslvBg==.sig.ed25519' }
# create with invalid date
ok 13 should throw
# create with invalid date
ok 14 should throw
# create with invalid content
ok 15 should throw
ok 16 should throw
ok 17 should throw
ok 18 should throw
ok 19 should throw
ok 20 array as content
ok 21 buffer as content
ok 22 date as content
ok 23 should throw
ok 24 should throw
ok 25 should throw
ok 26 should throw
ok 27 should throw
ok 28 should throw
ok 29 should throw
ok 30 content too long
# valid messages
ok 31 should be equivalent
ok 32 should be equivalent
ok 33 should be equal
ok 34 should be equal
ok 35 should be equivalent
ok 36 should be truthy
7000
21011
ok 37 should be truthy
ok 38 should be equivalent
# simple
{ validated: 10,
  queued: 0,
  queue: 
   [ { previous: null,
       sequence: 1,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080000,
       hash: 'sha256',
       content: [Object],
       signature: 'AwgeuI+rlpJzaLQpuIfCeXJM9rdwSGxMd02EtG8T3nwUwMytgWpFufR9jAMmCp8bH8jLGen6UENQ4n6jDHf9BQ==.sig.ed25519' },
     { previous: '%ADZ7SDzIU4XzRNrgnSoF1yGqTh7N28kzOiHQK2DAK1c=.sha256',
       sequence: 2,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080001,
       hash: 'sha256',
       content: [Object],
       signature: 'UZzmrFR+Yl1yDEEyJ7+U8Dz1QyEuT2unsnyCy7MYYU0Wygn06Z5oI8bg4PlXQ07yVnmnXQEq2R4bsdg4qWbaDg==.sig.ed25519' },
     { previous: '%hfl9CUdQ6xS/3Aq/l+fO/vvMFnUn0ZSJr5Qim49o6Vw=.sha256',
       sequence: 3,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080002,
       hash: 'sha256',
       content: [Object],
       signature: 'SZX4e1CrLj0Srij3CyQPRzVgpV4/oi+Pjs3GWsnEpLp+cGG29NrbYVqs4vw32e+3gCNqLBN5pPKCxqzdnpxLDw==.sig.ed25519' },
     { previous: '%iuvBOV8+fxoxZeWdhbpx7dDLwHoNfzCF03xsr859qyg=.sha256',
       sequence: 4,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080003,
       hash: 'sha256',
       content: [Object],
       signature: 'u443SPpGKy6mvUmvc+O+04FkdcnbFou2kTPnkEz49E3D1cmYkrYCEDsUmhsoYoiVrm27BsRnTAea7EfMG4wOBw==.sig.ed25519' },
     { previous: '%zFdvLNNUodV9Sq0dI6AO+gGEuGYjgNNBBdvwHTJyVNA=.sha256',
       sequence: 5,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080004,
       hash: 'sha256',
       content: [Object],
       signature: 'mMC7/n+mDyX0Lfq3LtDTffldHbWCIZ3bIGLgeNjfAS8A03oSsEPTbwEyqo2rb1/plldOEK6wsHW2JfyD1xt/Cg==.sig.ed25519' },
     { previous: '%xwtik4QpMicyEjWdnV1qsK/KVR8lC7+rjdetJ0t65sc=.sha256',
       sequence: 6,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080005,
       hash: 'sha256',
       content: [Object],
       signature: 'UMkQQgvoBu0VJMnfNzaB1u4f+FmHKbFGxaoyu1/yGbqVz6kfUJuaOU7jh4kgDnFa6Uljhjr1xSZvSbR5CQQaBw==.sig.ed25519' },
     { previous: '%BKOcs1MvXx7c+yghICHdwiORg46/etPrTjIb/MoE03k=.sha256',
       sequence: 7,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080006,
       hash: 'sha256',
       content: [Object],
       signature: 'htCtAAMTj0CTM9da7Ui0phVz+MB2EKH7WIfU7FueO22zTTpOZpiVMoocRQ+7vKHoD96taIvB/aBBdqcHChYKAQ==.sig.ed25519' },
     { previous: '%Cq1lg8kncval7tyWGY/R/UcbRjwjUEEo2GdMJoaoIrg=.sha256',
       sequence: 8,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080007,
       hash: 'sha256',
       content: [Object],
       signature: 'KTzPpP9wum0rIqTl2/cXfX5CY4y6bdSwFf8fY2/bf0jRSylp5i02+vOL76nrQ5RimLmyVfiPzW0/Z2sxEkYJAQ==.sig.ed25519' },
     { previous: '%/YBzvrDfwf0lNd41KgSWBBkr37Z5+t2FFqkoR3Id2R0=.sha256',
       sequence: 9,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080008,
       hash: 'sha256',
       content: [Object],
       signature: 'yPTFdzP2zQaY+lKcFohWW0P8C+/R0GBG0qFG1cSzNYXGXgi1OAWZfMpPjIpW3OCnDLboQe8UIxGsfjHWBIUHCQ==.sig.ed25519' },
     { previous: '%tSMO/oz5jduMDWKky74VgOZvwHnkI5td01vSLbdjdvE=.sha256',
       sequence: 10,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080009,
       hash: 'sha256',
       content: [Object],
       signature: 'I1P1aBHMZca/rv7gEQLRJRPUyUew7gU/CusXM8WRLgjT3rMnw2ATKslO8R0V8CWFMJAqejW6lvnyNr8e5Gx3CQ==.sig.ed25519' } ],
  feeds: 
   { '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519': 
      { id: '%Trb70jAkQsQ3FA+DoH416ia3+ce9FQ/12PgAtGP1Wr8=.sha256',
        sequence: 10,
        timestamp: 1491898080009,
        queue: [] } },
  error: null,
  waiting: [] }
# rerun
ok 39 should be equal
ok 40 should be equal
ok 41 should be equal
ok 42 should be equal
ok 43 should be equal
ok 44 should be equal
ok 45 should be equal
ok 46 should be equal
ok 47 should be equal
ok 48 should be equal
# invalid - fork
{ previous: '%tSMO/oz5jduMDWKky74VgOZvwHnkI5td01vSLbdjdvE=.sha256',
  sequence: 11,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080010,
  hash: 'sha256',
  content: { type: 'invalid' },
  signature: 'x8DLKbACSVMnnVfhXMAp1PtreZG2T5Tux19sKqVu62vQBIfQz3RdWBD+kSv7aiodgNsuy+fmBtYrdEbORA4pBQ==.sig.ed25519' }
{ Error: invalid message: expected different previous message, on feed:@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519
    at fatalError (/home/chrx/dev/ssb-validate/index.js:76:13)
    at Object.exports.checkInvalidCheap (/home/chrx/dev/ssb-validate/index.js:110:14)
    at Object.exports.checkInvalid (/home/chrx/dev/ssb-validate/index.js:125:21)
    at Object.exports.append (/home/chrx/dev/ssb-validate/index.js:171:21)
    at Test.<anonymous> (/home/chrx/dev/ssb-validate/test/error.js:68:17)
    at Test.bound [as _cb] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:77:32)
    at Test.run (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:96:10)
    at Test.bound [as run] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:77:32)
    at Immediate.next [as _onImmediate] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/results.js:71:15)
    at runCallback (timers.js:763:18) fatal: true }
ok 49 should be equal
# timestamp - rewind gives warning
Error: invalid message: expected sequence NaN but got:11in state:{"validated":10,"queued":0,"queue":[{"previous":null,"sequence":1,"author":"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519","timestamp":1491898080000,"hash":"sha256","content":{"type":"test","i":0},"signature":"AwgeuI+rlpJzaLQpuIfCeXJM9rdwSGxMd02EtG8T3nwUwMytgWpFufR9jAMmCp8bH8jLGen6UENQ4n6jDHf9BQ==.sig.ed25519"},{"previous":"%ADZ7SDzIU4XzRNrgnSoF1yGqTh7N28kzOiHQK2DAK1c=.sha256","sequence":2,"author":"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519","timestamp":1491898080001,"hash":"sha256","content":{"type":"test","i":1},"signature":"UZzmrFR+Yl1yDEEyJ7+U8Dz1QyEuT2unsnyCy7MYYU0Wygn06Z5oI8bg4PlXQ07yVnmnXQEq2R4bsdg4qWbaDg==.sig.ed25519"},{"previous":"%hfl9CUdQ6xS/3Aq/l+fO/vvMFnUn0ZSJr5Qim49o6Vw=.sha256","sequence":3,"author":"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519","timestamp":1491898080002,"hash":"sha256","content":{"type":"test","i":2},"signature":"SZX4e1CrLj0Srij3CyQPRzVgpV4/oi+Pjs3GWsnEpLp+cGG29NrbYVqs4vw32e+3gCNqLBN5pPKCxqzdnpxLDw==.sig.ed25519"},{"previous":"%iuvBOV8+fxoxZeWdhbpx7dDLwHoNfzCF03xsr859qyg=.sha256","sequence":4,"author":"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519","timestamp":1491898080003,"hash":"sha256","content":{"type":"test","i":3},"signature":"u443SPpGKy6mvUmvc+O+04FkdcnbFou2kTPnkEz49E3D1cmYkrYCEDsUmhsoYoiVrm27BsRnTAea7EfMG4wOBw==.sig.ed25519"},{"previous":"%zFdvLNNUodV9Sq0dI6AO+gGEuGYjgNNBBdvwHTJyVNA=.sha256","sequence":5,"author":"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519","timestamp":1491898080004,"hash":"sha256","content":{"type":"test","i":4},"signature":"mMC7/n+mDyX0Lfq3LtDTffldHbWCIZ3bIGLgeNjfAS8A03oSsEPTbwEyqo2rb1/plldOEK6wsHW2JfyD1xt/Cg==.sig.ed25519"},{"previous":"%xwtik4QpMicyEjWdnV1qsK/KVR8lC7+rjdetJ0t65sc=.sha256","sequence":6,"author":"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519","timestamp":1491898080005,"hash":"sha256","content":{"type":"test","i":5},"signature":"UMkQQgvoBu0VJMnfNzaB1u4f+FmHKbFGxaoyu1/yGbqVz6kfUJuaOU7jh4kgDnFa6Uljhjr1xSZvSbR5CQQaBw==.sig.ed25519"},{"previous":"%BKOcs1MvXx7c+yghICHdwiORg46/etPrTjIb/MoE03k=.sha256","sequence":7,"author":"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519","timestamp":1491898080006,"hash":"sha256","content":{"type":"test","i":6},"signature":"htCtAAMTj0CTM9da7Ui0phVz+MB2EKH7WIfU7FueO22zTTpOZpiVMoocRQ+7vKHoD96taIvB/aBBdqcHChYKAQ==.sig.ed25519"},{"previous":"%Cq1lg8kncval7tyWGY/R/UcbRjwjUEEo2GdMJoaoIrg=.sha256","sequence":8,"author":"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519","timestamp":1491898080007,"hash":"sha256","content":{"type":"test","i":7},"signature":"KTzPpP9wum0rIqTl2/cXfX5CY4y6bdSwFf8fY2/bf0jRSylp5i02+vOL76nrQ5RimLmyVfiPzW0/Z2sxEkYJAQ==.sig.ed25519"},{"previous":"%/YBzvrDfwf0lNd41KgSWBBkr37Z5+t2FFqkoR3Id2R0=.sha256","sequence":9,"author":"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519","timestamp":1491898080008,"hash":"sha256","content":{"type":"test","i":8},"signature":"yPTFdzP2zQaY+lKcFohWW0P8C+/R0GBG0qFG1cSzNYXGXgi1OAWZfMpPjIpW3OCnDLboQe8UIxGsfjHWBIUHCQ==.sig.ed25519"},{"previous":"%tSMO/oz5jduMDWKky74VgOZvwHnkI5td01vSLbdjdvE=.sha256","sequence":10,"author":"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519","timestamp":1491898080009,"hash":"sha256","content":{"type":"test","i":9},"signature":"I1P1aBHMZca/rv7gEQLRJRPUyUew7gU/CusXM8WRLgjT3rMnw2ATKslO8R0V8CWFMJAqejW6lvnyNr8e5Gx3CQ==.sig.ed25519"}],"feeds":{"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519":{"id":"%Trb70jAkQsQ3FA+DoH416ia3+ce9FQ/12PgAtGP1Wr8=.sha256","sequence":10,"timestamp":1491898080009,"queue":[]}},"error":null,"waiting":[]}, on feed:@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519
    at nonFatalError (/home/chrx/dev/ssb-validate/index.js:88:10)
    at Object.exports.checkInvalidCheap (/home/chrx/dev/ssb-validate/index.js:101:14)
    at Object.exports.checkInvalid (/home/chrx/dev/ssb-validate/index.js:125:21)
    at Test.<anonymous> (/home/chrx/dev/ssb-validate/test/error.js:87:17)
    at Test.bound [as _cb] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:77:32)
    at Test.run (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:96:10)
    at Test.bound [as run] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:77:32)
    at Immediate.next [as _onImmediate] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/results.js:71:15)
    at runCallback (timers.js:763:18)
    at tryOnImmediate (timers.js:734:5)
not ok 50 should be equal
  ---
    operator: equal
    expected: true
    actual:   undefined
    at: Test.<anonymous> (/home/chrx/dev/ssb-validate/test/error.js:89:7)
    stack: |-
      Error: should be equal
          at Test.assert [as _assert] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:225:54)
          at Test.bound [as _assert] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:77:32)
          at Test.equal.Test.equals.Test.isEqual.Test.is.Test.strictEqual.Test.strictEquals (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:388:10)
          at Test.bound [as equal] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:77:32)
          at Test.<anonymous> (/home/chrx/dev/ssb-validate/test/error.js:89:7)
          at Test.bound [as _cb] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:77:32)
          at Test.run (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:96:10)
          at Test.bound [as run] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:77:32)
          at Immediate.next [as _onImmediate] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/results.js:71:15)
          at runCallback (timers.js:763:18)
  ...
# timestamp - rewind append ok
{ previous: '%Trb70jAkQsQ3FA+DoH416ia3+ce9FQ/12PgAtGP1Wr8=.sha256',
  sequence: 11,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080008,
  hash: 'sha256',
  content: { type: 'invalid' },
  signature: 'nnFondjlmbtb/IHfnYh97Jl/roO8p4YG22VpiEAvs3bOIf43WjjdAu+sqTPuHMd8Qpu/zvdcvbwQMOKnz/x5AA==.sig.ed25519' } { previous: '%tSMO/oz5jduMDWKky74VgOZvwHnkI5td01vSLbdjdvE=.sha256',
  sequence: 10,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080009,
  hash: 'sha256',
  content: { type: 'test', i: 9 },
  signature: 'I1P1aBHMZca/rv7gEQLRJRPUyUew7gU/CusXM8WRLgjT3rMnw2ATKslO8R0V8CWFMJAqejW6lvnyNr8e5Gx3CQ==.sig.ed25519' }
# create with invalid date
ok 51 should throw
# create with invalid date
ok 52 should throw
# create with invalid content
ok 53 should throw
ok 54 should throw
ok 55 should throw
ok 56 should throw
ok 57 should throw
ok 58 array as content
ok 59 buffer as content
ok 60 date as content
ok 61 should throw
ok 62 should throw
ok 63 should throw
ok 64 should throw
ok 65 should throw
ok 66 should throw
ok 67 should throw
ok 68 content too long
# valid messages
ok 69 should be equivalent
ok 70 should be equivalent
ok 71 should be equal
ok 72 should be equal
ok 73 should be equivalent
ok 74 should be truthy
7000
21011
ok 75 should be truthy
ok 76 should be equivalent
# simple
{ validated: 10,
  queued: 0,
  queue: 
   [ { previous: null,
       sequence: 1,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080000,
       hash: 'sha256',
       content: [Object],
       signature: 'H0vlt+iiFWYupNVcpgVP5iMQJvmG0ONfTRKs13+ZgiuwLM5kYNV5Gs4X4GzT5eRmpcg/bkzKwNn1NnW5d0ekBQ==.sig.ed25519' },
     { previous: '%O+mfBJ1YUo+brHrmofEClPE/Nbv6pflS4b65RR53E9c=.sha256',
       sequence: 2,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080001,
       hash: 'sha256',
       content: [Object],
       signature: '+vyXz8Lj2F90F9QEovOYIUmhhkuc3V2PHjdsXtM2RpYzhXoV2b4TgoPUrbc65So0huGe4JRYj+eK9pxEBhuFCg==.sig.ed25519' },
     { previous: '%jTZu1dIZ/hMKMQehC/aKSdhPVBuaB/B1VIJj8ACwcYo=.sha256',
       sequence: 3,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080002,
       hash: 'sha256',
       content: [Object],
       signature: 'nt4deIh/bDaJOW5vHIY+v5OCr9gkxN6PpJ1adYpLLiC4nlSbwex77vvxDPrf11DXLWBrKuwu1ZboCKR0oS40Aw==.sig.ed25519' },
     { previous: '%3RJy0D/bVvEWv0A/k9YvNmefE8d3ll83t8IcoplXGkM=.sha256',
       sequence: 4,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080003,
       hash: 'sha256',
       content: [Object],
       signature: 'pjR7VNqnNpUW3jUwpqV9VoY6JnfDxEUq2Crles1tjU4Iv6Gs44MbwRhVM0bSQgfZcsm5Y0DFV7O6/+srWrjnDg==.sig.ed25519' },
     { previous: '%l6WDM0Fk4qmEbqxvsMHULIpOp/P/XZDNzIFgLM9foBQ=.sha256',
       sequence: 5,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080004,
       hash: 'sha256',
       content: [Object],
       signature: 'Eulg86L04AXkFiZytwe4yj7/317ifEFxEbWJtKV3MI9Ahpn0jniGgjqZwQii0ISD0AS70gUQIdnfOFo2CmXpCw==.sig.ed25519' },
     { previous: '%7lcuCNJeArJPdQR1HWKxX6hh7i3tSv6sonQQgqLqSbs=.sha256',
       sequence: 6,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080005,
       hash: 'sha256',
       content: [Object],
       signature: 'LSVe6yuXdTOZ+J0VbvX7gyh6S7TywFJ5RZNex6H9pk3yJszDFqNU8zECv26ClyO8l+B7q2aHYbEe2Ql1bI8jAw==.sig.ed25519' },
     { previous: '%LIVUROvGo++9VBex+xP4BhDl8Cpza33ZBcihqKiNOr0=.sha256',
       sequence: 7,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080006,
       hash: 'sha256',
       content: [Object],
       signature: 'KdxyzGlYR9tfEsm1N8Dw5/PBE2T8HxaBKVpdKuBs+MdBhVTPRMaEPcIWuHxzpjcT1TaZb2MSxHeQ/unrd8TYCg==.sig.ed25519' },
     { previous: '%wM1HpMbPai+4SKTzSCcp4eeTNh4JbACYXCmGJOzkdBo=.sha256',
       sequence: 8,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080007,
       hash: 'sha256',
       content: [Object],
       signature: 'pqgDcEpeesD6yivopCml6AVIsneqMc+dCdWyJaEejX+CFTjwRKzCJVaRgt9ExnIS1/o8TqS8FWFYll+3CedrBA==.sig.ed25519' },
     { previous: '%iHm21HFLftKa+dbqUiKTgCQwNUZO9yjXgkGzYb5GOaU=.sha256',
       sequence: 9,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080008,
       hash: 'sha256',
       content: [Object],
       signature: '/d7ISUoy6IdPYA92RTGetRELeVscs17NaVgnQIVd1dDCGWaiHMj5l30NnbS7Hwl4fe24fKOpDm/j2QunHEqIAg==.sig.ed25519' },
     { previous: '%7cx/BxdqEMKReMAY6+ieEUJcf+17P20amFK1LPXUASE=.sha256',
       sequence: 10,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080009,
       hash: 'sha256',
       content: [Object],
       signature: 'KEwxrtIeQcZGaVXzTYVT++1tdBuTcyRrbuh/PIIYUoBODk0f6TpNJ90E4NLZHCDRUhjSEQkVRqTw/Q4VmczUDg==.sig.ed25519' } ],
  feeds: 
   { '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519': 
      { id: '%cOM3j/RUOl1oU+6e+cB6bbHYZmD2o1kk8zfZp7Zqa4I=.sha256',
        sequence: 10,
        timestamp: 1491898080009,
        queue: [] } },
  error: null,
  waiting: [] }
# rerun
ok 77 should be equal
ok 78 should be equal
ok 79 should be equal
ok 80 should be equal
ok 81 should be equal
ok 82 should be equal
ok 83 should be equal
ok 84 should be equal
ok 85 should be equal
ok 86 should be equal
# invalid - fork
{ previous: '%7cx/BxdqEMKReMAY6+ieEUJcf+17P20amFK1LPXUASE=.sha256',
  sequence: 11,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080010,
  hash: 'sha256',
  content: { type: 'invalid' },
  signature: 'PPul+kOODjT7QOdjSvk1HGDVpMDStg1L9eaxWdmfEUsznvRzb+Jw96b8zjLFcQqEoq7XVxeqdFCmaJdfJiMkBQ==.sig.ed25519' }
{ Error: invalid message: expected different previous message, on feed:@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519
    at fatalError (/home/chrx/dev/ssb-validate/index.js:76:13)
    at Object.exports.checkInvalidCheap (/home/chrx/dev/ssb-validate/index.js:110:14)
    at Object.exports.checkInvalid (/home/chrx/dev/ssb-validate/index.js:125:21)
    at Object.exports.append (/home/chrx/dev/ssb-validate/index.js:171:21)
    at Test.<anonymous> (/home/chrx/dev/ssb-validate/test/error.js:68:17)
    at Test.bound [as _cb] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:77:32)
    at Test.run (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:96:10)
    at Test.bound [as run] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:77:32)
    at Immediate.next [as _onImmediate] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/results.js:71:15)
    at runCallback (timers.js:763:18) fatal: true }
ok 87 should be equal
# timestamp - rewind gives warning
Error: invalid message: expected sequence NaN but got:11in state:{"validated":10,"queued":0,"queue":[{"previous":null,"sequence":1,"author":"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519","timestamp":1491898080000,"hash":"sha256","content":{"type":"test","i":0},"signature":"H0vlt+iiFWYupNVcpgVP5iMQJvmG0ONfTRKs13+ZgiuwLM5kYNV5Gs4X4GzT5eRmpcg/bkzKwNn1NnW5d0ekBQ==.sig.ed25519"},{"previous":"%O+mfBJ1YUo+brHrmofEClPE/Nbv6pflS4b65RR53E9c=.sha256","sequence":2,"author":"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519","timestamp":1491898080001,"hash":"sha256","content":{"type":"test","i":1},"signature":"+vyXz8Lj2F90F9QEovOYIUmhhkuc3V2PHjdsXtM2RpYzhXoV2b4TgoPUrbc65So0huGe4JRYj+eK9pxEBhuFCg==.sig.ed25519"},{"previous":"%jTZu1dIZ/hMKMQehC/aKSdhPVBuaB/B1VIJj8ACwcYo=.sha256","sequence":3,"author":"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519","timestamp":1491898080002,"hash":"sha256","content":{"type":"test","i":2},"signature":"nt4deIh/bDaJOW5vHIY+v5OCr9gkxN6PpJ1adYpLLiC4nlSbwex77vvxDPrf11DXLWBrKuwu1ZboCKR0oS40Aw==.sig.ed25519"},{"previous":"%3RJy0D/bVvEWv0A/k9YvNmefE8d3ll83t8IcoplXGkM=.sha256","sequence":4,"author":"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519","timestamp":1491898080003,"hash":"sha256","content":{"type":"test","i":3},"signature":"pjR7VNqnNpUW3jUwpqV9VoY6JnfDxEUq2Crles1tjU4Iv6Gs44MbwRhVM0bSQgfZcsm5Y0DFV7O6/+srWrjnDg==.sig.ed25519"},{"previous":"%l6WDM0Fk4qmEbqxvsMHULIpOp/P/XZDNzIFgLM9foBQ=.sha256","sequence":5,"author":"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519","timestamp":1491898080004,"hash":"sha256","content":{"type":"test","i":4},"signature":"Eulg86L04AXkFiZytwe4yj7/317ifEFxEbWJtKV3MI9Ahpn0jniGgjqZwQii0ISD0AS70gUQIdnfOFo2CmXpCw==.sig.ed25519"},{"previous":"%7lcuCNJeArJPdQR1HWKxX6hh7i3tSv6sonQQgqLqSbs=.sha256","sequence":6,"author":"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519","timestamp":1491898080005,"hash":"sha256","content":{"type":"test","i":5},"signature":"LSVe6yuXdTOZ+J0VbvX7gyh6S7TywFJ5RZNex6H9pk3yJszDFqNU8zECv26ClyO8l+B7q2aHYbEe2Ql1bI8jAw==.sig.ed25519"},{"previous":"%LIVUROvGo++9VBex+xP4BhDl8Cpza33ZBcihqKiNOr0=.sha256","sequence":7,"author":"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519","timestamp":1491898080006,"hash":"sha256","content":{"type":"test","i":6},"signature":"KdxyzGlYR9tfEsm1N8Dw5/PBE2T8HxaBKVpdKuBs+MdBhVTPRMaEPcIWuHxzpjcT1TaZb2MSxHeQ/unrd8TYCg==.sig.ed25519"},{"previous":"%wM1HpMbPai+4SKTzSCcp4eeTNh4JbACYXCmGJOzkdBo=.sha256","sequence":8,"author":"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519","timestamp":1491898080007,"hash":"sha256","content":{"type":"test","i":7},"signature":"pqgDcEpeesD6yivopCml6AVIsneqMc+dCdWyJaEejX+CFTjwRKzCJVaRgt9ExnIS1/o8TqS8FWFYll+3CedrBA==.sig.ed25519"},{"previous":"%iHm21HFLftKa+dbqUiKTgCQwNUZO9yjXgkGzYb5GOaU=.sha256","sequence":9,"author":"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519","timestamp":1491898080008,"hash":"sha256","content":{"type":"test","i":8},"signature":"/d7ISUoy6IdPYA92RTGetRELeVscs17NaVgnQIVd1dDCGWaiHMj5l30NnbS7Hwl4fe24fKOpDm/j2QunHEqIAg==.sig.ed25519"},{"previous":"%7cx/BxdqEMKReMAY6+ieEUJcf+17P20amFK1LPXUASE=.sha256","sequence":10,"author":"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519","timestamp":1491898080009,"hash":"sha256","content":{"type":"test","i":9},"signature":"KEwxrtIeQcZGaVXzTYVT++1tdBuTcyRrbuh/PIIYUoBODk0f6TpNJ90E4NLZHCDRUhjSEQkVRqTw/Q4VmczUDg==.sig.ed25519"}],"feeds":{"@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519":{"id":"%cOM3j/RUOl1oU+6e+cB6bbHYZmD2o1kk8zfZp7Zqa4I=.sha256","sequence":10,"timestamp":1491898080009,"queue":[]}},"error":null,"waiting":[]}, on feed:@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519
    at nonFatalError (/home/chrx/dev/ssb-validate/index.js:88:10)
    at Object.exports.checkInvalidCheap (/home/chrx/dev/ssb-validate/index.js:101:14)
    at Object.exports.checkInvalid (/home/chrx/dev/ssb-validate/index.js:125:21)
    at Test.<anonymous> (/home/chrx/dev/ssb-validate/test/error.js:87:17)
    at Test.bound [as _cb] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:77:32)
    at Test.run (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:96:10)
    at Test.bound [as run] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:77:32)
    at Immediate.next [as _onImmediate] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/results.js:71:15)
    at runCallback (timers.js:763:18)
    at tryOnImmediate (timers.js:734:5)
not ok 88 should be equal
  ---
    operator: equal
    expected: true
    actual:   undefined
    at: Test.<anonymous> (/home/chrx/dev/ssb-validate/test/error.js:89:7)
    stack: |-
      Error: should be equal
          at Test.assert [as _assert] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:225:54)
          at Test.bound [as _assert] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:77:32)
          at Test.equal.Test.equals.Test.isEqual.Test.is.Test.strictEqual.Test.strictEquals (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:388:10)
          at Test.bound [as equal] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:77:32)
          at Test.<anonymous> (/home/chrx/dev/ssb-validate/test/error.js:89:7)
          at Test.bound [as _cb] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:77:32)
          at Test.run (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:96:10)
          at Test.bound [as run] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:77:32)
          at Immediate.next [as _onImmediate] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/results.js:71:15)
          at runCallback (timers.js:763:18)
  ...
# timestamp - rewind append ok
{ previous: '%cOM3j/RUOl1oU+6e+cB6bbHYZmD2o1kk8zfZp7Zqa4I=.sha256',
  sequence: 11,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080008,
  hash: 'sha256',
  content: { type: 'invalid' },
  signature: '0qP8yWXQsiCOR+wc23l6jGeD/Cai/AnEC2b968RJJmySih1Vn9t0Sb9SuoSRwCtpLKQBl33kX2m1wZkmvJjHCQ==.sig.ed25519' } { previous: '%7cx/BxdqEMKReMAY6+ieEUJcf+17P20amFK1LPXUASE=.sha256',
  sequence: 10,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080009,
  hash: 'sha256',
  content: { type: 'test', i: 9 },
  signature: 'KEwxrtIeQcZGaVXzTYVT++1tdBuTcyRrbuh/PIIYUoBODk0f6TpNJ90E4NLZHCDRUhjSEQkVRqTw/Q4VmczUDg==.sig.ed25519' }
# create with invalid date
ok 89 should throw
# create with invalid date
ok 90 should throw
# create with invalid content
ok 91 should throw
ok 92 should throw
ok 93 should throw
ok 94 should throw
ok 95 should throw
ok 96 array as content
ok 97 buffer as content
ok 98 date as content
ok 99 should throw
ok 100 should throw
ok 101 should throw
ok 102 should throw
ok 103 should throw
ok 104 should throw
ok 105 should throw
ok 106 content too long
# valid messages
ok 107 should be equivalent
ok 108 should be equivalent
ok 109 should be equal
ok 110 should be equal
ok 111 should be equivalent
ok 112 should be truthy
7000
21011
ok 113 should be truthy
ok 114 should be equivalent

1..114
# tests 114
# pass  111
# fail  3

