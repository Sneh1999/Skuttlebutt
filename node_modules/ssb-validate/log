
> ssb-validate@3.0.11 test /home/chrx/dev/ssb-validate
> set -e; for t in test/*.js; do node $t; done

TAP version 13
# test valid message:0
ok 1 should throw
# test valid message:1
ok 2 should throw
# test valid message:2
ok 3 should throw
# test valid message:3
ok 4 should throw
# test valid message:4
ok 5 should throw
# test valid message:5
ok 6 should throw
# test valid message:6
ok 7 should throw
# test valid message:7
ok 8 should throw
# test valid message:8
ok 9 should throw
# test valid message:9
ok 10 should throw
# test valid message:10
ok 11 should throw
# test valid message:11
ok 12 should throw
# test valid message:12
ok 13 should throw
# test valid message:13
ok 14 should throw
# test valid message:14
ok 15 should throw
# test valid message:15
ok 16 should throw
# test valid message:16
ok 17 should throw
# test valid message:17
ok 18 should throw
# test valid message:18
ok 19 should throw
# test valid message:19
ok 20 should throw
# test valid message:20
# test valid message:21
# test valid message:22
# test valid message:23
# test valid message:24
# test valid message:25
# test valid message:26
# test valid message:27
# test valid message:28
ok 21 should throw
# test valid message:29
ok 22 should throw
# test valid message:30
ok 23 should throw
# test valid message:31
ok 24 should throw
# test valid message:32
ok 25 should throw
# test valid message:33
ok 26 should throw
# test valid message:34
ok 27 should throw
# test valid message:35
ok 28 should throw
# test valid message:36
ok 29 should throw
# test valid message:37
ok 30 should throw
# test valid message:38
ok 31 should throw
# test valid message:39
ok 32 should throw
# test valid message:40
ok 33 should throw
# test valid message:41
ok 34 should throw
# test valid message:42
ok 35 should throw
# test valid message:43
ok 36 should throw
# test valid message:44
ok 37 should throw
# test valid message:45
ok 38 should throw
# test valid message:46
ok 39 should throw
# test valid message:47
ok 40 should throw
# test valid message:48
# test valid message:49
# test valid message:50
# test valid message:51
# test valid message:52
# test valid message:53
# test valid message:54
# test valid message:55
# test valid message:56
ok 41 should throw
# test valid message:57
ok 42 should throw
# test valid message:58
ok 43 should throw
# test valid message:59
ok 44 should throw
# test valid message:60
ok 45 should throw
# test valid message:61
ok 46 should throw
# test valid message:62
ok 47 should throw
# test valid message:63
ok 48 should throw
# test valid message:64
ok 49 should throw
# test valid message:65
ok 50 should throw
# test valid message:66
ok 51 should throw
# test valid message:67
ok 52 should throw
# test valid message:68
ok 53 should throw
# test valid message:69
ok 54 should throw
# test valid message:70
ok 55 should throw
# test valid message:71
ok 56 should throw
# test valid message:72
ok 57 should throw
# test valid message:73
ok 58 should throw
# test valid message:74
ok 59 should throw
# test valid message:75
ok 60 should throw
# test valid message:76
# test valid message:77
# test valid message:78
# test valid message:79
# test valid message:80
# test valid message:81
# test valid message:82
# test valid message:83

1..60
# tests 60
# pass  60

# ok

TAP version 13
# simple
id %cYRhj6c78apgj2EIRUcAvz+lepErcPCsrhLo2CXvNuw=.sha256
msg { previous: '%jIiVOF5631YGiIiK/uB43IZn7d9ZSv+e0ppFqh2QBBc=.sha256',
  sequence: 2,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080001,
  hash: 'sha256',
  content: { type: 'test', i: 1 },
  signature:
   'MQuGDPe9oCWzQUU7CQ9JlSJCp0WptWq+WFsD9htLjTRz6UfjDbBekOsSi5PwLg9zNrVXCPQ+zTBCeT0aAxqoAQ==.sig.ed25519' }
id %FgftYqwIuAcro/e4PN+s64xLBDokMOPS8euUjcoEsaE=.sha256
msg { previous: '%cYRhj6c78apgj2EIRUcAvz+lepErcPCsrhLo2CXvNuw=.sha256',
  sequence: 3,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080002,
  hash: 'sha256',
  content: { type: 'test', i: 2 },
  signature:
   'm5uMVoMesJH2+pSFhhfD1u9W0ZJ0Tzed9HAPHhLUOYDTbB43797eoU7DE/wcfbX3suXodzWiebUhBnF9qoAkBA==.sig.ed25519' }
id %NNRVSU+x97QUVuX2e878nTPdPdXD4TXW1QeJzH1vhYg=.sha256
msg { previous: '%FgftYqwIuAcro/e4PN+s64xLBDokMOPS8euUjcoEsaE=.sha256',
  sequence: 4,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080003,
  hash: 'sha256',
  content: { type: 'test', i: 3 },
  signature:
   'S12Ej3J24eM27TEXuykNX3mvDNhM3Tu3g/+JakkmeQ9O0MTyk+ynbHM/U7JyqletIcgrSPIL/EdIHXvCIhtWCQ==.sig.ed25519' }
id %ZuwXk31XSez4JaJIju/hJlCNJaKz/ZuFSpj7g8DJXfI=.sha256
msg { previous: '%NNRVSU+x97QUVuX2e878nTPdPdXD4TXW1QeJzH1vhYg=.sha256',
  sequence: 5,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080004,
  hash: 'sha256',
  content: { type: 'test', i: 4 },
  signature:
   'mjdjjliWXa6Wb8WkFuwXATeEVwnGvc4icId5s9LcH86AAaoHIW9JPXo0r/qedhdjBl1DrzGHp54EyUYgfmFeBg==.sig.ed25519' }
id %VS1eNDbPG9j+f7zl3Flgyp/X9FvPm1wnLffeSlnZsSw=.sha256
msg { previous: '%ZuwXk31XSez4JaJIju/hJlCNJaKz/ZuFSpj7g8DJXfI=.sha256',
  sequence: 6,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080005,
  hash: 'sha256',
  content: { type: 'test', i: 5 },
  signature:
   'qd5Q+bSjvbBqjyQrIbxoTwQ8TKMRSPCotOF73dTKw1E7LPQ32aWic3tLRUS7uazHK8ovOo+Ar9alVq9isF5+Dw==.sig.ed25519' }
id %0J0eJK0j78akyvZoQiawSTkSWBUiGv1H7FpC/YFNNU8=.sha256
msg { previous: '%VS1eNDbPG9j+f7zl3Flgyp/X9FvPm1wnLffeSlnZsSw=.sha256',
  sequence: 7,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080006,
  hash: 'sha256',
  content: { type: 'test', i: 6 },
  signature:
   'pwfgeNncbXWlKOCs28jCMfz+66NkrvcG29tYcYhjQ8q+zaUDk19iuTfQJkXdWDFlhZTvgR2Gtzh+0CNcouwEAQ==.sig.ed25519' }
id %XG/SgmRHCo9FpIqxAa4gEjLdPKejQItDRnAsmGqfWpk=.sha256
msg { previous: '%0J0eJK0j78akyvZoQiawSTkSWBUiGv1H7FpC/YFNNU8=.sha256',
  sequence: 8,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080007,
  hash: 'sha256',
  content: { type: 'test', i: 7 },
  signature:
   'mwAUjScd3xphF8r8oFgi/gRSFRDvKBFzNeYg+4Qxbk5XFVi78IXPtXrYSIib5gO2BskFK7PgxmEOBSSGmNsXAA==.sig.ed25519' }
id %Aez/9fUOHgC9u2zNhFai7FR+LJ+TiviT3zDIO8hdSOU=.sha256
msg { previous: '%XG/SgmRHCo9FpIqxAa4gEjLdPKejQItDRnAsmGqfWpk=.sha256',
  sequence: 9,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080008,
  hash: 'sha256',
  content: { type: 'test', i: 8 },
  signature:
   'EGgl5fyVc2T6XIrqB7sdeM5+XxP9RkEtyBuJA53q5WssCnkFHw756Z49mBp2SUHB1nMOsZhBRcSdanXoZH3iDA==.sig.ed25519' }
id %TZx6lr7gDvQbiwaY9m1EHs7vX4ykcVZXAY6P5H4nU9M=.sha256
msg { previous: '%Aez/9fUOHgC9u2zNhFai7FR+LJ+TiviT3zDIO8hdSOU=.sha256',
  sequence: 10,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080009,
  hash: 'sha256',
  content: { type: 'test', i: 9 },
  signature:
   'XoFnMvap94PSkzuhQbLtZcNOCGBWNvKss9qjf4oh489t1iAyjEXXo4dGMeoId8RXyf2MFZCNjtUTE76noslvBg==.sig.ed25519' }
{ validated: 10,
  queued: 0,
  queue:
   [ { previous: null,
       sequence: 1,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080000,
       hash: 'sha256',
       content: [Object],
       signature:
        'KmjPhbpYmLraZPtBMHZ3XA+iS6f510FaPfGm1EB4SPEA8PIAwGayFdnHkMR8Y0hpxCFI8mz1hOoQTWaagoWMAA==.sig.ed25519' },
     { previous: '%jIiVOF5631YGiIiK/uB43IZn7d9ZSv+e0ppFqh2QBBc=.sha256',
       sequence: 2,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080001,
       hash: 'sha256',
       content: [Object],
       signature:
        'MQuGDPe9oCWzQUU7CQ9JlSJCp0WptWq+WFsD9htLjTRz6UfjDbBekOsSi5PwLg9zNrVXCPQ+zTBCeT0aAxqoAQ==.sig.ed25519' },
     { previous: '%cYRhj6c78apgj2EIRUcAvz+lepErcPCsrhLo2CXvNuw=.sha256',
       sequence: 3,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080002,
       hash: 'sha256',
       content: [Object],
       signature:
        'm5uMVoMesJH2+pSFhhfD1u9W0ZJ0Tzed9HAPHhLUOYDTbB43797eoU7DE/wcfbX3suXodzWiebUhBnF9qoAkBA==.sig.ed25519' },
     { previous: '%FgftYqwIuAcro/e4PN+s64xLBDokMOPS8euUjcoEsaE=.sha256',
       sequence: 4,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080003,
       hash: 'sha256',
       content: [Object],
       signature:
        'S12Ej3J24eM27TEXuykNX3mvDNhM3Tu3g/+JakkmeQ9O0MTyk+ynbHM/U7JyqletIcgrSPIL/EdIHXvCIhtWCQ==.sig.ed25519' },
     { previous: '%NNRVSU+x97QUVuX2e878nTPdPdXD4TXW1QeJzH1vhYg=.sha256',
       sequence: 5,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080004,
       hash: 'sha256',
       content: [Object],
       signature:
        'mjdjjliWXa6Wb8WkFuwXATeEVwnGvc4icId5s9LcH86AAaoHIW9JPXo0r/qedhdjBl1DrzGHp54EyUYgfmFeBg==.sig.ed25519' },
     { previous: '%ZuwXk31XSez4JaJIju/hJlCNJaKz/ZuFSpj7g8DJXfI=.sha256',
       sequence: 6,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080005,
       hash: 'sha256',
       content: [Object],
       signature:
        'qd5Q+bSjvbBqjyQrIbxoTwQ8TKMRSPCotOF73dTKw1E7LPQ32aWic3tLRUS7uazHK8ovOo+Ar9alVq9isF5+Dw==.sig.ed25519' },
     { previous: '%VS1eNDbPG9j+f7zl3Flgyp/X9FvPm1wnLffeSlnZsSw=.sha256',
       sequence: 7,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080006,
       hash: 'sha256',
       content: [Object],
       signature:
        'pwfgeNncbXWlKOCs28jCMfz+66NkrvcG29tYcYhjQ8q+zaUDk19iuTfQJkXdWDFlhZTvgR2Gtzh+0CNcouwEAQ==.sig.ed25519' },
     { previous: '%0J0eJK0j78akyvZoQiawSTkSWBUiGv1H7FpC/YFNNU8=.sha256',
       sequence: 8,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080007,
       hash: 'sha256',
       content: [Object],
       signature:
        'mwAUjScd3xphF8r8oFgi/gRSFRDvKBFzNeYg+4Qxbk5XFVi78IXPtXrYSIib5gO2BskFK7PgxmEOBSSGmNsXAA==.sig.ed25519' },
     { previous: '%XG/SgmRHCo9FpIqxAa4gEjLdPKejQItDRnAsmGqfWpk=.sha256',
       sequence: 9,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080008,
       hash: 'sha256',
       content: [Object],
       signature:
        'EGgl5fyVc2T6XIrqB7sdeM5+XxP9RkEtyBuJA53q5WssCnkFHw756Z49mBp2SUHB1nMOsZhBRcSdanXoZH3iDA==.sig.ed25519' },
     { previous: '%Aez/9fUOHgC9u2zNhFai7FR+LJ+TiviT3zDIO8hdSOU=.sha256',
       sequence: 10,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080009,
       hash: 'sha256',
       content: [Object],
       signature:
        'XoFnMvap94PSkzuhQbLtZcNOCGBWNvKss9qjf4oh489t1iAyjEXXo4dGMeoId8RXyf2MFZCNjtUTE76noslvBg==.sig.ed25519' } ],
  feeds:
   { '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519':
      { id: '%TZx6lr7gDvQbiwaY9m1EHs7vX4ykcVZXAY6P5H4nU9M=.sha256',
        sequence: 10,
        timestamp: 1491898080009,
        queue: [] } },
  error: null,
  waiting: [] }
# rerun
{ previous: null,
  sequence: 1,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080000,
  hash: 'sha256',
  content: { type: 'test', i: 0 },
  signature:
   'KmjPhbpYmLraZPtBMHZ3XA+iS6f510FaPfGm1EB4SPEA8PIAwGayFdnHkMR8Y0hpxCFI8mz1hOoQTWaagoWMAA==.sig.ed25519' }
ok 1 should be equal
{ previous: '%jIiVOF5631YGiIiK/uB43IZn7d9ZSv+e0ppFqh2QBBc=.sha256',
  sequence: 2,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080001,
  hash: 'sha256',
  content: { type: 'test', i: 1 },
  signature:
   'MQuGDPe9oCWzQUU7CQ9JlSJCp0WptWq+WFsD9htLjTRz6UfjDbBekOsSi5PwLg9zNrVXCPQ+zTBCeT0aAxqoAQ==.sig.ed25519' }
ok 2 should be equal
{ previous: '%cYRhj6c78apgj2EIRUcAvz+lepErcPCsrhLo2CXvNuw=.sha256',
  sequence: 3,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080002,
  hash: 'sha256',
  content: { type: 'test', i: 2 },
  signature:
   'm5uMVoMesJH2+pSFhhfD1u9W0ZJ0Tzed9HAPHhLUOYDTbB43797eoU7DE/wcfbX3suXodzWiebUhBnF9qoAkBA==.sig.ed25519' }
ok 3 should be equal
{ previous: '%FgftYqwIuAcro/e4PN+s64xLBDokMOPS8euUjcoEsaE=.sha256',
  sequence: 4,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080003,
  hash: 'sha256',
  content: { type: 'test', i: 3 },
  signature:
   'S12Ej3J24eM27TEXuykNX3mvDNhM3Tu3g/+JakkmeQ9O0MTyk+ynbHM/U7JyqletIcgrSPIL/EdIHXvCIhtWCQ==.sig.ed25519' }
ok 4 should be equal
{ previous: '%NNRVSU+x97QUVuX2e878nTPdPdXD4TXW1QeJzH1vhYg=.sha256',
  sequence: 5,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080004,
  hash: 'sha256',
  content: { type: 'test', i: 4 },
  signature:
   'mjdjjliWXa6Wb8WkFuwXATeEVwnGvc4icId5s9LcH86AAaoHIW9JPXo0r/qedhdjBl1DrzGHp54EyUYgfmFeBg==.sig.ed25519' }
ok 5 should be equal
{ previous: '%ZuwXk31XSez4JaJIju/hJlCNJaKz/ZuFSpj7g8DJXfI=.sha256',
  sequence: 6,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080005,
  hash: 'sha256',
  content: { type: 'test', i: 5 },
  signature:
   'qd5Q+bSjvbBqjyQrIbxoTwQ8TKMRSPCotOF73dTKw1E7LPQ32aWic3tLRUS7uazHK8ovOo+Ar9alVq9isF5+Dw==.sig.ed25519' }
ok 6 should be equal
{ previous: '%VS1eNDbPG9j+f7zl3Flgyp/X9FvPm1wnLffeSlnZsSw=.sha256',
  sequence: 7,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080006,
  hash: 'sha256',
  content: { type: 'test', i: 6 },
  signature:
   'pwfgeNncbXWlKOCs28jCMfz+66NkrvcG29tYcYhjQ8q+zaUDk19iuTfQJkXdWDFlhZTvgR2Gtzh+0CNcouwEAQ==.sig.ed25519' }
ok 7 should be equal
{ previous: '%0J0eJK0j78akyvZoQiawSTkSWBUiGv1H7FpC/YFNNU8=.sha256',
  sequence: 8,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080007,
  hash: 'sha256',
  content: { type: 'test', i: 7 },
  signature:
   'mwAUjScd3xphF8r8oFgi/gRSFRDvKBFzNeYg+4Qxbk5XFVi78IXPtXrYSIib5gO2BskFK7PgxmEOBSSGmNsXAA==.sig.ed25519' }
ok 8 should be equal
{ previous: '%XG/SgmRHCo9FpIqxAa4gEjLdPKejQItDRnAsmGqfWpk=.sha256',
  sequence: 9,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080008,
  hash: 'sha256',
  content: { type: 'test', i: 8 },
  signature:
   'EGgl5fyVc2T6XIrqB7sdeM5+XxP9RkEtyBuJA53q5WssCnkFHw756Z49mBp2SUHB1nMOsZhBRcSdanXoZH3iDA==.sig.ed25519' }
ok 9 should be equal
{ previous: '%Aez/9fUOHgC9u2zNhFai7FR+LJ+TiviT3zDIO8hdSOU=.sha256',
  sequence: 10,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080009,
  hash: 'sha256',
  content: { type: 'test', i: 9 },
  signature:
   'XoFnMvap94PSkzuhQbLtZcNOCGBWNvKss9qjf4oh489t1iAyjEXXo4dGMeoId8RXyf2MFZCNjtUTE76noslvBg==.sig.ed25519' }
ok 10 should be equal
# invalid - fork
{ previous: '%Aez/9fUOHgC9u2zNhFai7FR+LJ+TiviT3zDIO8hdSOU=.sha256',
  sequence: 11,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080010,
  hash: 'sha256',
  content: { type: 'invalid' },
  signature:
   'UyHS+DiMYu1u1sB0aahw7qde46uC17AmLTjarHYSUtbV7PcLBFEKA6IYFBIN5XgwXosENLzKxVd9ir31cx9mDw==.sig.ed25519' }
{ Error: invalid message: expected different previous message, on feed:@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519
    at Object.exports.checkInvalidCheap (/home/chrx/dev/ssb-validate/index.js:122:20)
    at Object.exports.checkInvalid (/home/chrx/dev/ssb-validate/index.js:140:21)
    at Object.exports.append (/home/chrx/dev/ssb-validate/index.js:187:20)
    at Test.<anonymous> (/home/chrx/dev/ssb-validate/test/error.js:71:17)
    at Test.bound [as _cb] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:77:32)
    at Test.run (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:96:10)
    at Test.bound [as run] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:77:32)
    at Immediate.next [as _onImmediate] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/results.js:71:15)
    at runCallback (timers.js:694:18)
    at tryOnImmediate (timers.js:665:5) fatal: true }
ok 11 should be equal
# rewind ok
{ previous: '%TZx6lr7gDvQbiwaY9m1EHs7vX4ykcVZXAY6P5H4nU9M=.sha256',
  sequence: 11,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080008,
  hash: 'sha256',
  content: { type: 'invalid' },
  signature:
   'oG/nBygoAskGvUDxf5/LUuhiv7LDQErlvUejuWGpZSOK/h6f2cPbct/mmidrdTe5vepO8Wy24iXP/BAMWC14Dw==.sig.ed25519' } { previous: '%Aez/9fUOHgC9u2zNhFai7FR+LJ+TiviT3zDIO8hdSOU=.sha256',
  sequence: 10,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080009,
  hash: 'sha256',
  content: { type: 'test', i: 9 },
  signature:
   'XoFnMvap94PSkzuhQbLtZcNOCGBWNvKss9qjf4oh489t1iAyjEXXo4dGMeoId8RXyf2MFZCNjtUTE76noslvBg==.sig.ed25519' }
id %JiiVdjrVmx8Kk4VmyBo40cQCWaxL5UZtMGYcHqj+7Hw=.sha256
msg { previous: '%TZx6lr7gDvQbiwaY9m1EHs7vX4ykcVZXAY6P5H4nU9M=.sha256',
  sequence: 11,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080008,
  hash: 'sha256',
  content: { type: 'invalid' },
  signature:
   'oG/nBygoAskGvUDxf5/LUuhiv7LDQErlvUejuWGpZSOK/h6f2cPbct/mmidrdTe5vepO8Wy24iXP/BAMWC14Dw==.sig.ed25519' }
# create with invalid date
ok 12 should throw
# invalid because of empty content
ok 13 should throw
# various invalid first messages
ok 14 should throw
ok 15 should throw
ok 16 should throw
ok 17 should throw
ok 18 should throw
ok 19 should throw
ok 20 should throw
ok 21 should throw
ok 22 should throw
ok 23 should throw
ok 24 should throw
ok 25 should throw
ok 26 should throw
ok 27 should throw
ok 28 should throw
ok 29 should throw
ok 30 should throw
ok 31 should throw
ok 32 should throw
ok 33 should throw
ok 34 should throw
ok 35 should throw
ok 36 should throw
ok 37 should throw
ok 38 should throw
ok 39 should throw
ok 40 should throw
ok 41 should throw
ok 42 should throw
ok 43 should throw
ok 44 should throw
ok 45 should throw
# extended invalid first messages
ok 46 should throw
ok 47 should throw
ok 48 should throw
ok 49 should throw
ok 50 should throw
ok 51 should throw
ok 52 should throw
ok 53 should throw
# disallow extra fields
ok 54 should throw
ok 55 should throw
# valid messages
ok 56 should be equivalent
ok 57 should be equal
ok 58 should be equivalent
ok 59 should be equal
ok 60 should be equivalent
ok 61 should be equal
ok 62 should be equivalent
ok 63 should be equal
ok 64 should be equivalent
ok 65 should be equal
ok 66 should be truthy
7000
21011
ok 67 should be truthy
ok 68 should be equivalent
ok 69 should be equal
# simple
id %hfl9CUdQ6xS/3Aq/l+fO/vvMFnUn0ZSJr5Qim49o6Vw=.sha256
msg { previous: '%ADZ7SDzIU4XzRNrgnSoF1yGqTh7N28kzOiHQK2DAK1c=.sha256',
  sequence: 2,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080001,
  hash: 'sha256',
  content: { type: 'test', i: 1 },
  signature:
   'UZzmrFR+Yl1yDEEyJ7+U8Dz1QyEuT2unsnyCy7MYYU0Wygn06Z5oI8bg4PlXQ07yVnmnXQEq2R4bsdg4qWbaDg==.sig.ed25519' }
id %iuvBOV8+fxoxZeWdhbpx7dDLwHoNfzCF03xsr859qyg=.sha256
msg { previous: '%hfl9CUdQ6xS/3Aq/l+fO/vvMFnUn0ZSJr5Qim49o6Vw=.sha256',
  sequence: 3,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080002,
  hash: 'sha256',
  content: { type: 'test', i: 2 },
  signature:
   'SZX4e1CrLj0Srij3CyQPRzVgpV4/oi+Pjs3GWsnEpLp+cGG29NrbYVqs4vw32e+3gCNqLBN5pPKCxqzdnpxLDw==.sig.ed25519' }
id %zFdvLNNUodV9Sq0dI6AO+gGEuGYjgNNBBdvwHTJyVNA=.sha256
msg { previous: '%iuvBOV8+fxoxZeWdhbpx7dDLwHoNfzCF03xsr859qyg=.sha256',
  sequence: 4,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080003,
  hash: 'sha256',
  content: { type: 'test', i: 3 },
  signature:
   'u443SPpGKy6mvUmvc+O+04FkdcnbFou2kTPnkEz49E3D1cmYkrYCEDsUmhsoYoiVrm27BsRnTAea7EfMG4wOBw==.sig.ed25519' }
id %xwtik4QpMicyEjWdnV1qsK/KVR8lC7+rjdetJ0t65sc=.sha256
msg { previous: '%zFdvLNNUodV9Sq0dI6AO+gGEuGYjgNNBBdvwHTJyVNA=.sha256',
  sequence: 5,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080004,
  hash: 'sha256',
  content: { type: 'test', i: 4 },
  signature:
   'mMC7/n+mDyX0Lfq3LtDTffldHbWCIZ3bIGLgeNjfAS8A03oSsEPTbwEyqo2rb1/plldOEK6wsHW2JfyD1xt/Cg==.sig.ed25519' }
id %BKOcs1MvXx7c+yghICHdwiORg46/etPrTjIb/MoE03k=.sha256
msg { previous: '%xwtik4QpMicyEjWdnV1qsK/KVR8lC7+rjdetJ0t65sc=.sha256',
  sequence: 6,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080005,
  hash: 'sha256',
  content: { type: 'test', i: 5 },
  signature:
   'UMkQQgvoBu0VJMnfNzaB1u4f+FmHKbFGxaoyu1/yGbqVz6kfUJuaOU7jh4kgDnFa6Uljhjr1xSZvSbR5CQQaBw==.sig.ed25519' }
id %Cq1lg8kncval7tyWGY/R/UcbRjwjUEEo2GdMJoaoIrg=.sha256
msg { previous: '%BKOcs1MvXx7c+yghICHdwiORg46/etPrTjIb/MoE03k=.sha256',
  sequence: 7,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080006,
  hash: 'sha256',
  content: { type: 'test', i: 6 },
  signature:
   'htCtAAMTj0CTM9da7Ui0phVz+MB2EKH7WIfU7FueO22zTTpOZpiVMoocRQ+7vKHoD96taIvB/aBBdqcHChYKAQ==.sig.ed25519' }
id %/YBzvrDfwf0lNd41KgSWBBkr37Z5+t2FFqkoR3Id2R0=.sha256
msg { previous: '%Cq1lg8kncval7tyWGY/R/UcbRjwjUEEo2GdMJoaoIrg=.sha256',
  sequence: 8,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080007,
  hash: 'sha256',
  content: { type: 'test', i: 7 },
  signature:
   'KTzPpP9wum0rIqTl2/cXfX5CY4y6bdSwFf8fY2/bf0jRSylp5i02+vOL76nrQ5RimLmyVfiPzW0/Z2sxEkYJAQ==.sig.ed25519' }
id %tSMO/oz5jduMDWKky74VgOZvwHnkI5td01vSLbdjdvE=.sha256
msg { previous: '%/YBzvrDfwf0lNd41KgSWBBkr37Z5+t2FFqkoR3Id2R0=.sha256',
  sequence: 9,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080008,
  hash: 'sha256',
  content: { type: 'test', i: 8 },
  signature:
   'yPTFdzP2zQaY+lKcFohWW0P8C+/R0GBG0qFG1cSzNYXGXgi1OAWZfMpPjIpW3OCnDLboQe8UIxGsfjHWBIUHCQ==.sig.ed25519' }
id %Trb70jAkQsQ3FA+DoH416ia3+ce9FQ/12PgAtGP1Wr8=.sha256
msg { previous: '%tSMO/oz5jduMDWKky74VgOZvwHnkI5td01vSLbdjdvE=.sha256',
  sequence: 10,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080009,
  hash: 'sha256',
  content: { type: 'test', i: 9 },
  signature:
   'I1P1aBHMZca/rv7gEQLRJRPUyUew7gU/CusXM8WRLgjT3rMnw2ATKslO8R0V8CWFMJAqejW6lvnyNr8e5Gx3CQ==.sig.ed25519' }
{ validated: 10,
  queued: 0,
  queue:
   [ { previous: null,
       sequence: 1,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080000,
       hash: 'sha256',
       content: [Object],
       signature:
        'AwgeuI+rlpJzaLQpuIfCeXJM9rdwSGxMd02EtG8T3nwUwMytgWpFufR9jAMmCp8bH8jLGen6UENQ4n6jDHf9BQ==.sig.ed25519' },
     { previous: '%ADZ7SDzIU4XzRNrgnSoF1yGqTh7N28kzOiHQK2DAK1c=.sha256',
       sequence: 2,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080001,
       hash: 'sha256',
       content: [Object],
       signature:
        'UZzmrFR+Yl1yDEEyJ7+U8Dz1QyEuT2unsnyCy7MYYU0Wygn06Z5oI8bg4PlXQ07yVnmnXQEq2R4bsdg4qWbaDg==.sig.ed25519' },
     { previous: '%hfl9CUdQ6xS/3Aq/l+fO/vvMFnUn0ZSJr5Qim49o6Vw=.sha256',
       sequence: 3,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080002,
       hash: 'sha256',
       content: [Object],
       signature:
        'SZX4e1CrLj0Srij3CyQPRzVgpV4/oi+Pjs3GWsnEpLp+cGG29NrbYVqs4vw32e+3gCNqLBN5pPKCxqzdnpxLDw==.sig.ed25519' },
     { previous: '%iuvBOV8+fxoxZeWdhbpx7dDLwHoNfzCF03xsr859qyg=.sha256',
       sequence: 4,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080003,
       hash: 'sha256',
       content: [Object],
       signature:
        'u443SPpGKy6mvUmvc+O+04FkdcnbFou2kTPnkEz49E3D1cmYkrYCEDsUmhsoYoiVrm27BsRnTAea7EfMG4wOBw==.sig.ed25519' },
     { previous: '%zFdvLNNUodV9Sq0dI6AO+gGEuGYjgNNBBdvwHTJyVNA=.sha256',
       sequence: 5,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080004,
       hash: 'sha256',
       content: [Object],
       signature:
        'mMC7/n+mDyX0Lfq3LtDTffldHbWCIZ3bIGLgeNjfAS8A03oSsEPTbwEyqo2rb1/plldOEK6wsHW2JfyD1xt/Cg==.sig.ed25519' },
     { previous: '%xwtik4QpMicyEjWdnV1qsK/KVR8lC7+rjdetJ0t65sc=.sha256',
       sequence: 6,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080005,
       hash: 'sha256',
       content: [Object],
       signature:
        'UMkQQgvoBu0VJMnfNzaB1u4f+FmHKbFGxaoyu1/yGbqVz6kfUJuaOU7jh4kgDnFa6Uljhjr1xSZvSbR5CQQaBw==.sig.ed25519' },
     { previous: '%BKOcs1MvXx7c+yghICHdwiORg46/etPrTjIb/MoE03k=.sha256',
       sequence: 7,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080006,
       hash: 'sha256',
       content: [Object],
       signature:
        'htCtAAMTj0CTM9da7Ui0phVz+MB2EKH7WIfU7FueO22zTTpOZpiVMoocRQ+7vKHoD96taIvB/aBBdqcHChYKAQ==.sig.ed25519' },
     { previous: '%Cq1lg8kncval7tyWGY/R/UcbRjwjUEEo2GdMJoaoIrg=.sha256',
       sequence: 8,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080007,
       hash: 'sha256',
       content: [Object],
       signature:
        'KTzPpP9wum0rIqTl2/cXfX5CY4y6bdSwFf8fY2/bf0jRSylp5i02+vOL76nrQ5RimLmyVfiPzW0/Z2sxEkYJAQ==.sig.ed25519' },
     { previous: '%/YBzvrDfwf0lNd41KgSWBBkr37Z5+t2FFqkoR3Id2R0=.sha256',
       sequence: 9,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080008,
       hash: 'sha256',
       content: [Object],
       signature:
        'yPTFdzP2zQaY+lKcFohWW0P8C+/R0GBG0qFG1cSzNYXGXgi1OAWZfMpPjIpW3OCnDLboQe8UIxGsfjHWBIUHCQ==.sig.ed25519' },
     { previous: '%tSMO/oz5jduMDWKky74VgOZvwHnkI5td01vSLbdjdvE=.sha256',
       sequence: 10,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080009,
       hash: 'sha256',
       content: [Object],
       signature:
        'I1P1aBHMZca/rv7gEQLRJRPUyUew7gU/CusXM8WRLgjT3rMnw2ATKslO8R0V8CWFMJAqejW6lvnyNr8e5Gx3CQ==.sig.ed25519' } ],
  feeds:
   { '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519':
      { id: '%Trb70jAkQsQ3FA+DoH416ia3+ce9FQ/12PgAtGP1Wr8=.sha256',
        sequence: 10,
        timestamp: 1491898080009,
        queue: [] } },
  error: null,
  waiting: [] }
# rerun
{ previous: null,
  sequence: 1,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080000,
  hash: 'sha256',
  content: { type: 'test', i: 0 },
  signature:
   'AwgeuI+rlpJzaLQpuIfCeXJM9rdwSGxMd02EtG8T3nwUwMytgWpFufR9jAMmCp8bH8jLGen6UENQ4n6jDHf9BQ==.sig.ed25519' }
ok 70 should be equal
{ previous: '%ADZ7SDzIU4XzRNrgnSoF1yGqTh7N28kzOiHQK2DAK1c=.sha256',
  sequence: 2,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080001,
  hash: 'sha256',
  content: { type: 'test', i: 1 },
  signature:
   'UZzmrFR+Yl1yDEEyJ7+U8Dz1QyEuT2unsnyCy7MYYU0Wygn06Z5oI8bg4PlXQ07yVnmnXQEq2R4bsdg4qWbaDg==.sig.ed25519' }
ok 71 should be equal
{ previous: '%hfl9CUdQ6xS/3Aq/l+fO/vvMFnUn0ZSJr5Qim49o6Vw=.sha256',
  sequence: 3,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080002,
  hash: 'sha256',
  content: { type: 'test', i: 2 },
  signature:
   'SZX4e1CrLj0Srij3CyQPRzVgpV4/oi+Pjs3GWsnEpLp+cGG29NrbYVqs4vw32e+3gCNqLBN5pPKCxqzdnpxLDw==.sig.ed25519' }
ok 72 should be equal
{ previous: '%iuvBOV8+fxoxZeWdhbpx7dDLwHoNfzCF03xsr859qyg=.sha256',
  sequence: 4,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080003,
  hash: 'sha256',
  content: { type: 'test', i: 3 },
  signature:
   'u443SPpGKy6mvUmvc+O+04FkdcnbFou2kTPnkEz49E3D1cmYkrYCEDsUmhsoYoiVrm27BsRnTAea7EfMG4wOBw==.sig.ed25519' }
ok 73 should be equal
{ previous: '%zFdvLNNUodV9Sq0dI6AO+gGEuGYjgNNBBdvwHTJyVNA=.sha256',
  sequence: 5,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080004,
  hash: 'sha256',
  content: { type: 'test', i: 4 },
  signature:
   'mMC7/n+mDyX0Lfq3LtDTffldHbWCIZ3bIGLgeNjfAS8A03oSsEPTbwEyqo2rb1/plldOEK6wsHW2JfyD1xt/Cg==.sig.ed25519' }
ok 74 should be equal
{ previous: '%xwtik4QpMicyEjWdnV1qsK/KVR8lC7+rjdetJ0t65sc=.sha256',
  sequence: 6,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080005,
  hash: 'sha256',
  content: { type: 'test', i: 5 },
  signature:
   'UMkQQgvoBu0VJMnfNzaB1u4f+FmHKbFGxaoyu1/yGbqVz6kfUJuaOU7jh4kgDnFa6Uljhjr1xSZvSbR5CQQaBw==.sig.ed25519' }
ok 75 should be equal
{ previous: '%BKOcs1MvXx7c+yghICHdwiORg46/etPrTjIb/MoE03k=.sha256',
  sequence: 7,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080006,
  hash: 'sha256',
  content: { type: 'test', i: 6 },
  signature:
   'htCtAAMTj0CTM9da7Ui0phVz+MB2EKH7WIfU7FueO22zTTpOZpiVMoocRQ+7vKHoD96taIvB/aBBdqcHChYKAQ==.sig.ed25519' }
ok 76 should be equal
{ previous: '%Cq1lg8kncval7tyWGY/R/UcbRjwjUEEo2GdMJoaoIrg=.sha256',
  sequence: 8,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080007,
  hash: 'sha256',
  content: { type: 'test', i: 7 },
  signature:
   'KTzPpP9wum0rIqTl2/cXfX5CY4y6bdSwFf8fY2/bf0jRSylp5i02+vOL76nrQ5RimLmyVfiPzW0/Z2sxEkYJAQ==.sig.ed25519' }
ok 77 should be equal
{ previous: '%/YBzvrDfwf0lNd41KgSWBBkr37Z5+t2FFqkoR3Id2R0=.sha256',
  sequence: 9,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080008,
  hash: 'sha256',
  content: { type: 'test', i: 8 },
  signature:
   'yPTFdzP2zQaY+lKcFohWW0P8C+/R0GBG0qFG1cSzNYXGXgi1OAWZfMpPjIpW3OCnDLboQe8UIxGsfjHWBIUHCQ==.sig.ed25519' }
ok 78 should be equal
{ previous: '%tSMO/oz5jduMDWKky74VgOZvwHnkI5td01vSLbdjdvE=.sha256',
  sequence: 10,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080009,
  hash: 'sha256',
  content: { type: 'test', i: 9 },
  signature:
   'I1P1aBHMZca/rv7gEQLRJRPUyUew7gU/CusXM8WRLgjT3rMnw2ATKslO8R0V8CWFMJAqejW6lvnyNr8e5Gx3CQ==.sig.ed25519' }
ok 79 should be equal
# invalid - fork
{ previous: '%tSMO/oz5jduMDWKky74VgOZvwHnkI5td01vSLbdjdvE=.sha256',
  sequence: 11,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080010,
  hash: 'sha256',
  content: { type: 'invalid' },
  signature:
   'x8DLKbACSVMnnVfhXMAp1PtreZG2T5Tux19sKqVu62vQBIfQz3RdWBD+kSv7aiodgNsuy+fmBtYrdEbORA4pBQ==.sig.ed25519' }
{ Error: invalid message: expected different previous message, on feed:@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519
    at Object.exports.checkInvalidCheap (/home/chrx/dev/ssb-validate/index.js:122:20)
    at Object.exports.checkInvalid (/home/chrx/dev/ssb-validate/index.js:140:21)
    at Object.exports.append (/home/chrx/dev/ssb-validate/index.js:187:20)
    at Test.<anonymous> (/home/chrx/dev/ssb-validate/test/error.js:71:17)
    at Test.bound [as _cb] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:77:32)
    at Test.run (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:96:10)
    at Test.bound [as run] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:77:32)
    at Immediate.next [as _onImmediate] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/results.js:71:15)
    at runCallback (timers.js:694:18)
    at tryOnImmediate (timers.js:665:5) fatal: true }
ok 80 should be equal
# rewind ok
{ previous: '%Trb70jAkQsQ3FA+DoH416ia3+ce9FQ/12PgAtGP1Wr8=.sha256',
  sequence: 11,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080008,
  hash: 'sha256',
  content: { type: 'invalid' },
  signature:
   'nnFondjlmbtb/IHfnYh97Jl/roO8p4YG22VpiEAvs3bOIf43WjjdAu+sqTPuHMd8Qpu/zvdcvbwQMOKnz/x5AA==.sig.ed25519' } { previous: '%tSMO/oz5jduMDWKky74VgOZvwHnkI5td01vSLbdjdvE=.sha256',
  sequence: 10,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080009,
  hash: 'sha256',
  content: { type: 'test', i: 9 },
  signature:
   'I1P1aBHMZca/rv7gEQLRJRPUyUew7gU/CusXM8WRLgjT3rMnw2ATKslO8R0V8CWFMJAqejW6lvnyNr8e5Gx3CQ==.sig.ed25519' }
id %2+C8hMyrnBsnSXuwyXlmkyIMK0/suG1m5Ab8D7wA1EA=.sha256
msg { previous: '%Trb70jAkQsQ3FA+DoH416ia3+ce9FQ/12PgAtGP1Wr8=.sha256',
  sequence: 11,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080008,
  hash: 'sha256',
  content: { type: 'invalid' },
  signature:
   'nnFondjlmbtb/IHfnYh97Jl/roO8p4YG22VpiEAvs3bOIf43WjjdAu+sqTPuHMd8Qpu/zvdcvbwQMOKnz/x5AA==.sig.ed25519' }
# create with invalid date
ok 81 should throw
# invalid because of empty content
ok 82 should throw
# various invalid first messages
ok 83 should throw
ok 84 should throw
ok 85 should throw
ok 86 should throw
ok 87 should throw
ok 88 should throw
ok 89 should throw
ok 90 should throw
ok 91 should throw
ok 92 should throw
ok 93 should throw
ok 94 should throw
ok 95 should throw
ok 96 should throw
ok 97 should throw
ok 98 should throw
ok 99 should throw
ok 100 should throw
ok 101 should throw
ok 102 should throw
ok 103 should throw
ok 104 should throw
ok 105 should throw
ok 106 should throw
ok 107 should throw
ok 108 should throw
ok 109 should throw
ok 110 should throw
ok 111 should throw
ok 112 should throw
ok 113 should throw
ok 114 should throw
# extended invalid first messages
ok 115 should throw
ok 116 should throw
ok 117 should throw
ok 118 should throw
ok 119 should throw
ok 120 should throw
ok 121 should throw
ok 122 should throw
# disallow extra fields
ok 123 should throw
ok 124 should throw
# valid messages
ok 125 should be equivalent
ok 126 should be equal
ok 127 should be equivalent
ok 128 should be equal
ok 129 should be equivalent
ok 130 should be equal
ok 131 should be equivalent
ok 132 should be equal
ok 133 should be equivalent
ok 134 should be equal
ok 135 should be truthy
7000
21011
ok 136 should be truthy
ok 137 should be equivalent
ok 138 should be equal
# simple
id %jTZu1dIZ/hMKMQehC/aKSdhPVBuaB/B1VIJj8ACwcYo=.sha256
msg { previous: '%O+mfBJ1YUo+brHrmofEClPE/Nbv6pflS4b65RR53E9c=.sha256',
  sequence: 2,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080001,
  hash: 'sha256',
  content: { type: 'test', i: 1 },
  signature:
   '+vyXz8Lj2F90F9QEovOYIUmhhkuc3V2PHjdsXtM2RpYzhXoV2b4TgoPUrbc65So0huGe4JRYj+eK9pxEBhuFCg==.sig.ed25519' }
id %3RJy0D/bVvEWv0A/k9YvNmefE8d3ll83t8IcoplXGkM=.sha256
msg { previous: '%jTZu1dIZ/hMKMQehC/aKSdhPVBuaB/B1VIJj8ACwcYo=.sha256',
  sequence: 3,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080002,
  hash: 'sha256',
  content: { type: 'test', i: 2 },
  signature:
   'nt4deIh/bDaJOW5vHIY+v5OCr9gkxN6PpJ1adYpLLiC4nlSbwex77vvxDPrf11DXLWBrKuwu1ZboCKR0oS40Aw==.sig.ed25519' }
id %l6WDM0Fk4qmEbqxvsMHULIpOp/P/XZDNzIFgLM9foBQ=.sha256
msg { previous: '%3RJy0D/bVvEWv0A/k9YvNmefE8d3ll83t8IcoplXGkM=.sha256',
  sequence: 4,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080003,
  hash: 'sha256',
  content: { type: 'test', i: 3 },
  signature:
   'pjR7VNqnNpUW3jUwpqV9VoY6JnfDxEUq2Crles1tjU4Iv6Gs44MbwRhVM0bSQgfZcsm5Y0DFV7O6/+srWrjnDg==.sig.ed25519' }
id %7lcuCNJeArJPdQR1HWKxX6hh7i3tSv6sonQQgqLqSbs=.sha256
msg { previous: '%l6WDM0Fk4qmEbqxvsMHULIpOp/P/XZDNzIFgLM9foBQ=.sha256',
  sequence: 5,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080004,
  hash: 'sha256',
  content: { type: 'test', i: 4 },
  signature:
   'Eulg86L04AXkFiZytwe4yj7/317ifEFxEbWJtKV3MI9Ahpn0jniGgjqZwQii0ISD0AS70gUQIdnfOFo2CmXpCw==.sig.ed25519' }
id %LIVUROvGo++9VBex+xP4BhDl8Cpza33ZBcihqKiNOr0=.sha256
msg { previous: '%7lcuCNJeArJPdQR1HWKxX6hh7i3tSv6sonQQgqLqSbs=.sha256',
  sequence: 6,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080005,
  hash: 'sha256',
  content: { type: 'test', i: 5 },
  signature:
   'LSVe6yuXdTOZ+J0VbvX7gyh6S7TywFJ5RZNex6H9pk3yJszDFqNU8zECv26ClyO8l+B7q2aHYbEe2Ql1bI8jAw==.sig.ed25519' }
id %wM1HpMbPai+4SKTzSCcp4eeTNh4JbACYXCmGJOzkdBo=.sha256
msg { previous: '%LIVUROvGo++9VBex+xP4BhDl8Cpza33ZBcihqKiNOr0=.sha256',
  sequence: 7,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080006,
  hash: 'sha256',
  content: { type: 'test', i: 6 },
  signature:
   'KdxyzGlYR9tfEsm1N8Dw5/PBE2T8HxaBKVpdKuBs+MdBhVTPRMaEPcIWuHxzpjcT1TaZb2MSxHeQ/unrd8TYCg==.sig.ed25519' }
id %iHm21HFLftKa+dbqUiKTgCQwNUZO9yjXgkGzYb5GOaU=.sha256
msg { previous: '%wM1HpMbPai+4SKTzSCcp4eeTNh4JbACYXCmGJOzkdBo=.sha256',
  sequence: 8,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080007,
  hash: 'sha256',
  content: { type: 'test', i: 7 },
  signature:
   'pqgDcEpeesD6yivopCml6AVIsneqMc+dCdWyJaEejX+CFTjwRKzCJVaRgt9ExnIS1/o8TqS8FWFYll+3CedrBA==.sig.ed25519' }
id %7cx/BxdqEMKReMAY6+ieEUJcf+17P20amFK1LPXUASE=.sha256
msg { previous: '%iHm21HFLftKa+dbqUiKTgCQwNUZO9yjXgkGzYb5GOaU=.sha256',
  sequence: 9,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080008,
  hash: 'sha256',
  content: { type: 'test', i: 8 },
  signature:
   '/d7ISUoy6IdPYA92RTGetRELeVscs17NaVgnQIVd1dDCGWaiHMj5l30NnbS7Hwl4fe24fKOpDm/j2QunHEqIAg==.sig.ed25519' }
id %cOM3j/RUOl1oU+6e+cB6bbHYZmD2o1kk8zfZp7Zqa4I=.sha256
msg { previous: '%7cx/BxdqEMKReMAY6+ieEUJcf+17P20amFK1LPXUASE=.sha256',
  sequence: 10,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080009,
  hash: 'sha256',
  content: { type: 'test', i: 9 },
  signature:
   'KEwxrtIeQcZGaVXzTYVT++1tdBuTcyRrbuh/PIIYUoBODk0f6TpNJ90E4NLZHCDRUhjSEQkVRqTw/Q4VmczUDg==.sig.ed25519' }
{ validated: 10,
  queued: 0,
  queue:
   [ { previous: null,
       sequence: 1,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080000,
       hash: 'sha256',
       content: [Object],
       signature:
        'H0vlt+iiFWYupNVcpgVP5iMQJvmG0ONfTRKs13+ZgiuwLM5kYNV5Gs4X4GzT5eRmpcg/bkzKwNn1NnW5d0ekBQ==.sig.ed25519' },
     { previous: '%O+mfBJ1YUo+brHrmofEClPE/Nbv6pflS4b65RR53E9c=.sha256',
       sequence: 2,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080001,
       hash: 'sha256',
       content: [Object],
       signature:
        '+vyXz8Lj2F90F9QEovOYIUmhhkuc3V2PHjdsXtM2RpYzhXoV2b4TgoPUrbc65So0huGe4JRYj+eK9pxEBhuFCg==.sig.ed25519' },
     { previous: '%jTZu1dIZ/hMKMQehC/aKSdhPVBuaB/B1VIJj8ACwcYo=.sha256',
       sequence: 3,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080002,
       hash: 'sha256',
       content: [Object],
       signature:
        'nt4deIh/bDaJOW5vHIY+v5OCr9gkxN6PpJ1adYpLLiC4nlSbwex77vvxDPrf11DXLWBrKuwu1ZboCKR0oS40Aw==.sig.ed25519' },
     { previous: '%3RJy0D/bVvEWv0A/k9YvNmefE8d3ll83t8IcoplXGkM=.sha256',
       sequence: 4,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080003,
       hash: 'sha256',
       content: [Object],
       signature:
        'pjR7VNqnNpUW3jUwpqV9VoY6JnfDxEUq2Crles1tjU4Iv6Gs44MbwRhVM0bSQgfZcsm5Y0DFV7O6/+srWrjnDg==.sig.ed25519' },
     { previous: '%l6WDM0Fk4qmEbqxvsMHULIpOp/P/XZDNzIFgLM9foBQ=.sha256',
       sequence: 5,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080004,
       hash: 'sha256',
       content: [Object],
       signature:
        'Eulg86L04AXkFiZytwe4yj7/317ifEFxEbWJtKV3MI9Ahpn0jniGgjqZwQii0ISD0AS70gUQIdnfOFo2CmXpCw==.sig.ed25519' },
     { previous: '%7lcuCNJeArJPdQR1HWKxX6hh7i3tSv6sonQQgqLqSbs=.sha256',
       sequence: 6,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080005,
       hash: 'sha256',
       content: [Object],
       signature:
        'LSVe6yuXdTOZ+J0VbvX7gyh6S7TywFJ5RZNex6H9pk3yJszDFqNU8zECv26ClyO8l+B7q2aHYbEe2Ql1bI8jAw==.sig.ed25519' },
     { previous: '%LIVUROvGo++9VBex+xP4BhDl8Cpza33ZBcihqKiNOr0=.sha256',
       sequence: 7,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080006,
       hash: 'sha256',
       content: [Object],
       signature:
        'KdxyzGlYR9tfEsm1N8Dw5/PBE2T8HxaBKVpdKuBs+MdBhVTPRMaEPcIWuHxzpjcT1TaZb2MSxHeQ/unrd8TYCg==.sig.ed25519' },
     { previous: '%wM1HpMbPai+4SKTzSCcp4eeTNh4JbACYXCmGJOzkdBo=.sha256',
       sequence: 8,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080007,
       hash: 'sha256',
       content: [Object],
       signature:
        'pqgDcEpeesD6yivopCml6AVIsneqMc+dCdWyJaEejX+CFTjwRKzCJVaRgt9ExnIS1/o8TqS8FWFYll+3CedrBA==.sig.ed25519' },
     { previous: '%iHm21HFLftKa+dbqUiKTgCQwNUZO9yjXgkGzYb5GOaU=.sha256',
       sequence: 9,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080008,
       hash: 'sha256',
       content: [Object],
       signature:
        '/d7ISUoy6IdPYA92RTGetRELeVscs17NaVgnQIVd1dDCGWaiHMj5l30NnbS7Hwl4fe24fKOpDm/j2QunHEqIAg==.sig.ed25519' },
     { previous: '%7cx/BxdqEMKReMAY6+ieEUJcf+17P20amFK1LPXUASE=.sha256',
       sequence: 10,
       author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
       timestamp: 1491898080009,
       hash: 'sha256',
       content: [Object],
       signature:
        'KEwxrtIeQcZGaVXzTYVT++1tdBuTcyRrbuh/PIIYUoBODk0f6TpNJ90E4NLZHCDRUhjSEQkVRqTw/Q4VmczUDg==.sig.ed25519' } ],
  feeds:
   { '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519':
      { id: '%cOM3j/RUOl1oU+6e+cB6bbHYZmD2o1kk8zfZp7Zqa4I=.sha256',
        sequence: 10,
        timestamp: 1491898080009,
        queue: [] } },
  error: null,
  waiting: [] }
# rerun
{ previous: null,
  sequence: 1,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080000,
  hash: 'sha256',
  content: { type: 'test', i: 0 },
  signature:
   'H0vlt+iiFWYupNVcpgVP5iMQJvmG0ONfTRKs13+ZgiuwLM5kYNV5Gs4X4GzT5eRmpcg/bkzKwNn1NnW5d0ekBQ==.sig.ed25519' }
ok 139 should be equal
{ previous: '%O+mfBJ1YUo+brHrmofEClPE/Nbv6pflS4b65RR53E9c=.sha256',
  sequence: 2,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080001,
  hash: 'sha256',
  content: { type: 'test', i: 1 },
  signature:
   '+vyXz8Lj2F90F9QEovOYIUmhhkuc3V2PHjdsXtM2RpYzhXoV2b4TgoPUrbc65So0huGe4JRYj+eK9pxEBhuFCg==.sig.ed25519' }
ok 140 should be equal
{ previous: '%jTZu1dIZ/hMKMQehC/aKSdhPVBuaB/B1VIJj8ACwcYo=.sha256',
  sequence: 3,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080002,
  hash: 'sha256',
  content: { type: 'test', i: 2 },
  signature:
   'nt4deIh/bDaJOW5vHIY+v5OCr9gkxN6PpJ1adYpLLiC4nlSbwex77vvxDPrf11DXLWBrKuwu1ZboCKR0oS40Aw==.sig.ed25519' }
ok 141 should be equal
{ previous: '%3RJy0D/bVvEWv0A/k9YvNmefE8d3ll83t8IcoplXGkM=.sha256',
  sequence: 4,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080003,
  hash: 'sha256',
  content: { type: 'test', i: 3 },
  signature:
   'pjR7VNqnNpUW3jUwpqV9VoY6JnfDxEUq2Crles1tjU4Iv6Gs44MbwRhVM0bSQgfZcsm5Y0DFV7O6/+srWrjnDg==.sig.ed25519' }
ok 142 should be equal
{ previous: '%l6WDM0Fk4qmEbqxvsMHULIpOp/P/XZDNzIFgLM9foBQ=.sha256',
  sequence: 5,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080004,
  hash: 'sha256',
  content: { type: 'test', i: 4 },
  signature:
   'Eulg86L04AXkFiZytwe4yj7/317ifEFxEbWJtKV3MI9Ahpn0jniGgjqZwQii0ISD0AS70gUQIdnfOFo2CmXpCw==.sig.ed25519' }
ok 143 should be equal
{ previous: '%7lcuCNJeArJPdQR1HWKxX6hh7i3tSv6sonQQgqLqSbs=.sha256',
  sequence: 6,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080005,
  hash: 'sha256',
  content: { type: 'test', i: 5 },
  signature:
   'LSVe6yuXdTOZ+J0VbvX7gyh6S7TywFJ5RZNex6H9pk3yJszDFqNU8zECv26ClyO8l+B7q2aHYbEe2Ql1bI8jAw==.sig.ed25519' }
ok 144 should be equal
{ previous: '%LIVUROvGo++9VBex+xP4BhDl8Cpza33ZBcihqKiNOr0=.sha256',
  sequence: 7,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080006,
  hash: 'sha256',
  content: { type: 'test', i: 6 },
  signature:
   'KdxyzGlYR9tfEsm1N8Dw5/PBE2T8HxaBKVpdKuBs+MdBhVTPRMaEPcIWuHxzpjcT1TaZb2MSxHeQ/unrd8TYCg==.sig.ed25519' }
ok 145 should be equal
{ previous: '%wM1HpMbPai+4SKTzSCcp4eeTNh4JbACYXCmGJOzkdBo=.sha256',
  sequence: 8,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080007,
  hash: 'sha256',
  content: { type: 'test', i: 7 },
  signature:
   'pqgDcEpeesD6yivopCml6AVIsneqMc+dCdWyJaEejX+CFTjwRKzCJVaRgt9ExnIS1/o8TqS8FWFYll+3CedrBA==.sig.ed25519' }
ok 146 should be equal
{ previous: '%iHm21HFLftKa+dbqUiKTgCQwNUZO9yjXgkGzYb5GOaU=.sha256',
  sequence: 9,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080008,
  hash: 'sha256',
  content: { type: 'test', i: 8 },
  signature:
   '/d7ISUoy6IdPYA92RTGetRELeVscs17NaVgnQIVd1dDCGWaiHMj5l30NnbS7Hwl4fe24fKOpDm/j2QunHEqIAg==.sig.ed25519' }
ok 147 should be equal
{ previous: '%7cx/BxdqEMKReMAY6+ieEUJcf+17P20amFK1LPXUASE=.sha256',
  sequence: 10,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080009,
  hash: 'sha256',
  content: { type: 'test', i: 9 },
  signature:
   'KEwxrtIeQcZGaVXzTYVT++1tdBuTcyRrbuh/PIIYUoBODk0f6TpNJ90E4NLZHCDRUhjSEQkVRqTw/Q4VmczUDg==.sig.ed25519' }
ok 148 should be equal
# invalid - fork
{ previous: '%7cx/BxdqEMKReMAY6+ieEUJcf+17P20amFK1LPXUASE=.sha256',
  sequence: 11,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080010,
  hash: 'sha256',
  content: { type: 'invalid' },
  signature:
   'PPul+kOODjT7QOdjSvk1HGDVpMDStg1L9eaxWdmfEUsznvRzb+Jw96b8zjLFcQqEoq7XVxeqdFCmaJdfJiMkBQ==.sig.ed25519' }
{ Error: invalid message: expected different previous message, on feed:@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519
    at Object.exports.checkInvalidCheap (/home/chrx/dev/ssb-validate/index.js:122:20)
    at Object.exports.checkInvalid (/home/chrx/dev/ssb-validate/index.js:140:21)
    at Object.exports.append (/home/chrx/dev/ssb-validate/index.js:187:20)
    at Test.<anonymous> (/home/chrx/dev/ssb-validate/test/error.js:71:17)
    at Test.bound [as _cb] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:77:32)
    at Test.run (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:96:10)
    at Test.bound [as run] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/test.js:77:32)
    at Immediate.next [as _onImmediate] (/home/chrx/dev/ssb-validate/node_modules/tape/lib/results.js:71:15)
    at runCallback (timers.js:694:18)
    at tryOnImmediate (timers.js:665:5) fatal: true }
ok 149 should be equal
# rewind ok
{ previous: '%cOM3j/RUOl1oU+6e+cB6bbHYZmD2o1kk8zfZp7Zqa4I=.sha256',
  sequence: 11,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080008,
  hash: 'sha256',
  content: { type: 'invalid' },
  signature:
   '0qP8yWXQsiCOR+wc23l6jGeD/Cai/AnEC2b968RJJmySih1Vn9t0Sb9SuoSRwCtpLKQBl33kX2m1wZkmvJjHCQ==.sig.ed25519' } { previous: '%7cx/BxdqEMKReMAY6+ieEUJcf+17P20amFK1LPXUASE=.sha256',
  sequence: 10,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080009,
  hash: 'sha256',
  content: { type: 'test', i: 9 },
  signature:
   'KEwxrtIeQcZGaVXzTYVT++1tdBuTcyRrbuh/PIIYUoBODk0f6TpNJ90E4NLZHCDRUhjSEQkVRqTw/Q4VmczUDg==.sig.ed25519' }
id %pJBkExt1Fp0k993YYJz1WeKITR9C8/+ioKlL1brd8Rs=.sha256
msg { previous: '%cOM3j/RUOl1oU+6e+cB6bbHYZmD2o1kk8zfZp7Zqa4I=.sha256',
  sequence: 11,
  author: '@AzvddyStfk/T95/3VuHxuJRwqqpBkCyoW7qHRCui2N4=.ed25519',
  timestamp: 1491898080008,
  hash: 'sha256',
  content: { type: 'invalid' },
  signature:
   '0qP8yWXQsiCOR+wc23l6jGeD/Cai/AnEC2b968RJJmySih1Vn9t0Sb9SuoSRwCtpLKQBl33kX2m1wZkmvJjHCQ==.sig.ed25519' }
# create with invalid date
ok 150 should throw
# invalid because of empty content
ok 151 should throw
# various invalid first messages
ok 152 should throw
ok 153 should throw
ok 154 should throw
ok 155 should throw
ok 156 should throw
ok 157 should throw
ok 158 should throw
ok 159 should throw
ok 160 should throw
ok 161 should throw
ok 162 should throw
ok 163 should throw
ok 164 should throw
ok 165 should throw
ok 166 should throw
ok 167 should throw
ok 168 should throw
ok 169 should throw
ok 170 should throw
ok 171 should throw
ok 172 should throw
ok 173 should throw
ok 174 should throw
ok 175 should throw
ok 176 should throw
ok 177 should throw
ok 178 should throw
ok 179 should throw
ok 180 should throw
ok 181 should throw
ok 182 should throw
ok 183 should throw
# extended invalid first messages
ok 184 should throw
ok 185 should throw
ok 186 should throw
ok 187 should throw
ok 188 should throw
ok 189 should throw
ok 190 should throw
ok 191 should throw
# disallow extra fields
ok 192 should throw
ok 193 should throw
# valid messages
ok 194 should be equivalent
ok 195 should be equal
ok 196 should be equivalent
ok 197 should be equal
ok 198 should be equivalent
ok 199 should be equal
ok 200 should be equivalent
ok 201 should be equal
ok 202 should be equivalent
ok 203 should be equal
ok 204 should be truthy
7000
21011
ok 205 should be truthy
ok 206 should be equivalent
ok 207 should be equal
# write data
(node:27524) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.

1..207
# tests 207
# pass  207

# ok

(node:27531) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.
TAP version 13
# simple
ok 1 cheap checks are valid
ok 2 signature is valid
ok 3 should be equal
ok 4 should be equal
ok 5 should be equal
ok 6 should be equivalent
ok 7 should be equivalent
ok 8 cheap checks are invalid (on invalid message)
ok 9 signature is invalid (on invalid message)
ok 10 should be equal
ok 11 should be equal
ok 12 should be equal
ok 13 should be equal
ok 14 should be equal
ok 15 should be equal
ok 16 should be equal
ok 17 should be equivalent
ok 18 should be equivalent
ok 19 should be equal
id %Ld6xW5LQ7Jw88YUTvO0vThKsLis+tJt0rKoyxPdD77Q=.sha256
msg { previous: '%F2m2dhvkyZzPclk7tPCdQmwE+2GH97L7NKYcj1Hu3+Y=.sha256',
  sequence: 3,
  author: '@dGm2+y3z0PCjt2Q08ruSFa7yh11g755dxZNjXWwxp90=.ed25519',
  timestamp: 1491898200000,
  hash: 'sha256',
  content: { type: 'test2' },
  signature:
   'zLibLZQ/cKOV74OdwuMNrFkMEnq2+rR+5DgGpBxNlleycxxXDIJljyP2BgOR/9Xr2zdfhP9chmWyH+H9WFC1Bw==.sig.ed25519' }
ok 20 should be equivalent
{ validated: 3,
  queued: 0,
  queue:
   [ { previous: null,
       sequence: 1,
       author: '@dGm2+y3z0PCjt2Q08ruSFa7yh11g755dxZNjXWwxp90=.ed25519',
       timestamp: 1491898080000,
       hash: 'sha256',
       content: [Object],
       signature:
        'D9ATdw3vRxA2sjkvOacznmUjceBLWenbOypgc1nXOpT9An4K7+Fd03p53pI4o6iKsCaGQMjM8lanT7twqi+UAg==.sig.ed25519' },
     { previous: '%dXdyYsGcCCVBTTXRJsGu72ff7ptxi6f2RrRzo2UWjjg=.sha256',
       sequence: 2,
       author: '@dGm2+y3z0PCjt2Q08ruSFa7yh11g755dxZNjXWwxp90=.ed25519',
       timestamp: 1491898140000,
       hash: 'sha256',
       content: [Object],
       signature:
        'J1e9noRkqVIRnFnV7yZMbfkaxu5c0hlMH0reXFIMZ6AxmNVxvVNNhLehan9EthGuXnSMXQPvBT2ApZFTyxe0CA==.sig.ed25519' },
     { previous: '%F2m2dhvkyZzPclk7tPCdQmwE+2GH97L7NKYcj1Hu3+Y=.sha256',
       sequence: 3,
       author: '@dGm2+y3z0PCjt2Q08ruSFa7yh11g755dxZNjXWwxp90=.ed25519',
       timestamp: 1491898200000,
       hash: 'sha256',
       content: [Object],
       signature:
        'zLibLZQ/cKOV74OdwuMNrFkMEnq2+rR+5DgGpBxNlleycxxXDIJljyP2BgOR/9Xr2zdfhP9chmWyH+H9WFC1Bw==.sig.ed25519' } ],
  feeds:
   { '@dGm2+y3z0PCjt2Q08ruSFa7yh11g755dxZNjXWwxp90=.ed25519':
      { id: '%Ld6xW5LQ7Jw88YUTvO0vThKsLis+tJt0rKoyxPdD77Q=.sha256',
        sequence: 3,
        timestamp: 1491898200000,
        queue: [] } },
  error: false,
  waiting: [] }
# queue the first item
ok 21 should be equal
ok 22 should be equal
ok 23 should be equal
ok 24 should be equal
ok 25 should be equal
ok 26 should be equivalent
ok 27 should be equal
ok 28 should be equal
ok 29 should be falsy
ok 30 should be equal
id %/pEQI2g8Kxcbzn/yA3+uWNxgOxgKCEu+y6J534Dl6Fg=.sha256
msg { previous: '%Tmv/vwPePVXrBACyoRpxQQIDwiyaas89DkyaY96WvOU=.sha256',
  sequence: 2,
  author: '@+7DLwEDFS+Q/JUD+aAYKjSOFVabm9eUteFxPT54aI7k=.ed25519',
  timestamp: 1491901800000,
  hash: 'sha256',
  content: { type: 'test' },
  signature:
   'PG8/HwFd/FgkMNwRM3cZ8mT88z+ZITnuTJBDMLoOGezQDXAzvd5j/x7RuMjt83QuUyUwgsPa4RraT6sAzm8PDw==.sig.ed25519' }
ok 31 should be equal
ok 32 should be equal
# simple
ok 33 cheap checks are valid
ok 34 signature is valid
ok 35 should be equal
ok 36 should be equal
ok 37 should be equal
ok 38 should be equivalent
ok 39 should be equivalent
ok 40 cheap checks are invalid (on invalid message)
ok 41 signature is invalid (on invalid message)
ok 42 should be equal
ok 43 should be equal
ok 44 should be equal
ok 45 should be equal
ok 46 should be equal
ok 47 should be equal
ok 48 should be equal
ok 49 should be equivalent
ok 50 should be equivalent
ok 51 should be equal
id %3iNkuI/bd1nibdR2Y9Dkfm6CFnEz80TKK5ZZErtIHy4=.sha256
msg { previous: '%6V0IIM6SF04/dYrElpz6+Pp1gcdrtTcobFDA0xNyH8A=.sha256',
  sequence: 3,
  author: '@dGm2+y3z0PCjt2Q08ruSFa7yh11g755dxZNjXWwxp90=.ed25519',
  timestamp: 1491898200000,
  hash: 'sha256',
  content: { type: 'test2' },
  signature:
   'PO11PRyt8pj/P6CNZ/28XpRVUvuFhCJbMy3wEr2x9OoUYlh83S/Gd/LWRl6v3sz6JmaC6fSVWA9eWWYFpp3dCg==.sig.ed25519' }
ok 52 should be equivalent
{ validated: 3,
  queued: 0,
  queue:
   [ { previous: null,
       sequence: 1,
       author: '@dGm2+y3z0PCjt2Q08ruSFa7yh11g755dxZNjXWwxp90=.ed25519',
       timestamp: 1491898080000,
       hash: 'sha256',
       content: [Object],
       signature:
        '8SmgfBo0vXKViEsCVHiwAWW/jjQVzMYIGzppHx1rFGuSNnq+6aM9+fGJn8ElLWBowkly9kMOPS7JFo9eqs93DQ==.sig.ed25519' },
     { previous: '%qFtYLsfMmw9BPQTQx1BjWwMymYxYHXzEwfL00Gxw81M=.sha256',
       sequence: 2,
       author: '@dGm2+y3z0PCjt2Q08ruSFa7yh11g755dxZNjXWwxp90=.ed25519',
       timestamp: 1491898140000,
       hash: 'sha256',
       content: [Object],
       signature:
        'QgV50Yqd22jA25WtocwaZTR/Kj5HUuCcLZICG53UkzyircOjoROovzAbSMQ7fUJTGWucoYt9mRSlw1MeZAvfBQ==.sig.ed25519' },
     { previous: '%6V0IIM6SF04/dYrElpz6+Pp1gcdrtTcobFDA0xNyH8A=.sha256',
       sequence: 3,
       author: '@dGm2+y3z0PCjt2Q08ruSFa7yh11g755dxZNjXWwxp90=.ed25519',
       timestamp: 1491898200000,
       hash: 'sha256',
       content: [Object],
       signature:
        'PO11PRyt8pj/P6CNZ/28XpRVUvuFhCJbMy3wEr2x9OoUYlh83S/Gd/LWRl6v3sz6JmaC6fSVWA9eWWYFpp3dCg==.sig.ed25519' } ],
  feeds:
   { '@dGm2+y3z0PCjt2Q08ruSFa7yh11g755dxZNjXWwxp90=.ed25519':
      { id: '%3iNkuI/bd1nibdR2Y9Dkfm6CFnEz80TKK5ZZErtIHy4=.sha256',
        sequence: 3,
        timestamp: 1491898200000,
        queue: [] } },
  error: false,
  waiting: [] }
# queue the first item
ok 53 should be equal
ok 54 should be equal
ok 55 should be equal
ok 56 should be equal
ok 57 should be equal
ok 58 should be equivalent
ok 59 should be equal
ok 60 should be equal
ok 61 should be falsy
ok 62 should be equal
id %+x/Iwok52hvNFGX3AXozVlB3jk+geceyuH1IzmIct5A=.sha256
msg { previous: '%X66vfZW8Qiz6gRssEfBdzPfsMAsQ87frjpJHt/Wk5eY=.sha256',
  sequence: 2,
  author: '@+7DLwEDFS+Q/JUD+aAYKjSOFVabm9eUteFxPT54aI7k=.ed25519',
  timestamp: 1491901800000,
  hash: 'sha256',
  content: { type: 'test' },
  signature:
   'EmYZB4Pqa2GoBoPpdkGWK+gca+U0+Lhrg0UalMpa/K9oIrFWK+smpbX5KYDRw8rvmopg4ssh5sO2OKI1FZ9SBQ==.sig.ed25519' }
ok 63 should be equal
ok 64 should be equal

1..64
# tests 64
# pass  64

# ok

